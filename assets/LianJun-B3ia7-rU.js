import{_ as k,r as v,o as B,a as L,c as d,b as T,d as n,F as m,e as h,f as c,n as p,g as E,h as S,t as f}from"./index-CJ-ZDMVi.js";function w(s,e){s>e?(document.getElementById("navTop").classList.add("navBackground","navBackgroundDivider"),document.getElementById("navTitle").classList.add("navShow"),document.getElementById("navTitle").classList.remove("navHidden"),document.querySelector(".contentBackground").classList.add("backgroundBlur"),document.querySelectorAll(".cardView").forEach(o=>{o.classList.remove("controlBlur")})):(document.getElementById("navTop").classList.remove("navBackground","navBackgroundDivider"),document.getElementById("navTitle").classList.remove("navShow"),document.getElementById("navTitle").classList.add("navHidden"),document.querySelector(".contentBackground").classList.remove("backgroundBlur"),document.querySelectorAll(".cardView").forEach(o=>{o.classList.add("controlBlur")})),s>e+80?(document.getElementById("navLeft").classList.remove("navHidden"),document.getElementById("navLeft").classList.add("navShow"),document.getElementById("navRight").classList.remove("navHidden"),document.getElementById("navRight").classList.add("navShow")):(document.getElementById("navLeft").classList.remove("navShow"),document.getElementById("navLeft").classList.add("navHidden"),document.getElementById("navRight").classList.remove("navShow"),document.getElementById("navRight").classList.add("navHidden")),s>e+250?(document.querySelector(".navBar").classList.add("navBarTop","navBackgroundDivider"),document.getElementById("navTop").classList.remove("navBackgroundDivider"),document.documentElement.style.setProperty("--contentBackgroundTop","88px")):(document.querySelector(".navBar").classList.remove("navBarTop","navBackgroundDivider"),document.documentElement.style.setProperty("--contentBackgroundTop","44px"),s>e&&document.getElementById("navTop").classList.add("navBackgroundDivider"))}const x={data(){return{intervalId:null,intervalCount:0,myInfoList:[],linkList:[],skIconList:[],filterType:"all",lastWidth:0}},setup(){const s=v(null),e=v(325);function o(){w(s.value.scrollTop,e.value)}const a=v(!1),i=v(null),l=v(null);let t=0,r=.2;function u(){if(l.value){t-=r;const g=l.value.offsetWidth;Math.abs(t)>=g/2&&(t=0),l.value.style.transform=`translateX(${t}px)`,requestAnimationFrame(u)}}const y=()=>{r=0},I=()=>{r=.2};return B(()=>{s.value&&s.value.addEventListener("scroll",o),l.value&&u(),l.value&&(l.value.addEventListener("mouseenter",y),l.value.addEventListener("mouseleave",I))}),L(()=>{s.value&&s.value.removeEventListener("scroll",o)}),{isScrolled:a,scrollView:s,skillScollRow:i,skillScollContainer:l,skillScollRow:i,skillScollContainer:l,showNavTopPara:e}},mounted(){this.$route.path==="/"?(this.showNavTopPara=325,document.documentElement.style.setProperty("--profilePhotoModuleMarginTop","200px")):(this.showNavTopPara=145,document.documentElement.style.setProperty("--profilePhotoModuleMarginTop","20px")),this.fetchData(),this.fetchContentData(),this.resizeObserver=new ResizeObserver(e=>{window.requestAnimationFrame(()=>{this.onResize()})});const s=document.getElementById("waterfall");s?this.resizeObserver.observe(s):console.error("未找到 #waterfall 容器元素"),this.startWaterfallInterval()},computed:{filteredList(){return this.filterType==="all"?this.myInfoList:this.myInfoList.filter(s=>s.type===this.filterType)},getlinkList(){return this.linkList},getSkIconList(){return this.skIconList}},beforeDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()},watch:{filterType(){this.$nextTick(()=>{this.arrangeWaterfall(),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},50)})},$route(s,e){s.path==="/"?(this.showNavTopPara=325,document.documentElement.style.setProperty("--profilePhotoModuleMarginTop","200px")):(this.showNavTopPara=145,document.documentElement.style.setProperty("--profilePhotoModuleMarginTop","20px"))}},methods:{goToPage(s,e,o){const a=this.$route.name;a!==s?e&&o?this.$router.push({name:s,query:{path:e,title:o}}):this.$router.push({name:s}):this.$router.replace({name:a,query:{path:e,title:o}})},setFilterType(s){this.filterType=s,this.$nextTick(()=>{this.arrangeWaterfall()})},fetchContentData(){const s=fetch("./json/project.json").then(a=>a.json()).then(a=>a.map(i=>({...i,type:"project"}))),e=fetch("./json/video.json").then(a=>a.json()).then(a=>a.map(i=>({...i,type:"video"}))),o=fetch("./json/essay.json").then(a=>a.json()).then(a=>a.map(i=>({...i,type:"essay"})));Promise.all([s,e,o]).then(([a,i,l])=>{this.myInfoList=[...a,...i,...l],this.myInfoList.forEach(t=>{t.createDate&&(t.createDateSortPara=new Date(t.createDate))}),this.myInfoList.sort((t,r)=>t.createDateSortPara-r.createDateSortPara),console.log(this.myInfoList.map(t=>({...t,type:"essay"}))),this.$nextTick(()=>{this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},350)})})},fetchData(){fetch("./json/link.json").then(s=>s.json()).then(s=>{this.linkList=s}),fetch("./json/skIcon.json").then(s=>s.json()).then(s=>{this.skIconList=s})},arrangeWaterfall(){console.log("重新布局"),document.getElementById("all").style.color="black",document.getElementById("project").style.color="black",document.getElementById("video").style.color="black",document.getElementById("essay").style.color="black",document.getElementById(this.filterType).style.color="#3A6A5E";const s=document.getElementById("waterfall"),e=Array.from(s.children),o=s.offsetWidth,a=o<240?1:Math.min(Math.floor(o/220),4),i=new Array(a).fill(0),l=(o-(a-1)*10)/a;e.forEach(t=>{const r=t.offsetHeight,u=i.indexOf(Math.min(...i));t.style.width=`${l}px`,t.style.top=`${i[u]+10}px`,t.style.left=`${u*l+u*10}px`,i[u]+=r+10}),s.style.height=`${Math.max(...i)}px`},startWaterfallInterval(){this.intervalId=setInterval(()=>{this.intervalCount++,this.intervalCount<=30&&this.arrangeWaterfall()},300)},stopWaterfallInterval(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},onResize(){const s=document.getElementById("waterfall");if(!s)return;const e=s.offsetWidth;e!==this.lastWidth&&(this.arrangeWaterfall(),this.lastWidth=e,this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},350))},beforeDestroy(){this.observer&&this.observer.disconnect(),this.stopWaterfallInterval()}}},b={ref:"scrollView"},j={class:"contentView"},P={class:"profilePhotoModule"},W={class:"linkAndSetting"},$={class:"controlBlur"},D=["href"],C=["src","title"],M={class:"list controlBlur"},F={class:"skillScollRow",ref:"skillScollRow",style:{overflow:"hidden"}},_={class:"scrollView",ref:"skillScollContainer",style:{display:"flex",gap:"5px","align-items":"center",padding:"0 16px"}},H=["src","width"],R={class:"navBar"},q={id:"waterfall",class:"cardModule"},z=["onClick"],A=["src"],V={class:"cardViewTag"};function O(s,e,o,a,i,l){return c(),d("div",b,[e[14]||(e[14]=T('<nav id="navTop" data-v-a7693ace><div id="navLeft" class="navHidden" data-v-a7693ace><img src="./image/SF-Symbol/phone.png" data-v-a7693ace><span data-v-a7693ace>联系</span></div><div id="navTitle" class="navHidden" data-v-a7693ace><img src="./image/lianjun.png" data-v-a7693ace><span data-v-a7693ace>LianJun</span></div><div id="navRight" class="navHidden" data-v-a7693ace><img src="./image/SF-Symbol/gearshape.png" data-v-a7693ace><span data-v-a7693ace>设置</span></div></nav>',1)),n("div",j,[e[13]||(e[13]=n("div",{class:"contentBackground"},null,-1)),n("div",P,[e[8]||(e[8]=n("img",{src:"./image/lianjun.png"},null,-1)),e[9]||(e[9]=n("p",null,"LianJun",-1)),n("div",W,[(c(!0),d(m,null,h(l.getlinkList,t=>(c(),d("div",$,[n("a",{href:t.link,target:"_blank"},[n("img",{src:`./image/link/${t.image}`,title:t.name,style:p(`padding: ${t.padding}px;`)},null,12,C)],8,D)]))),256)),e[6]||(e[6]=n("div",{class:"divider controlBlur"},null,-1)),e[7]||(e[7]=n("div",{class:"controlBlur"},[n("img",{class:"linkButtonImage",src:"./image/link/setting.png",title:"设置",style:{padding:"4px"}})],-1))])]),n("div",M,[n("div",{class:"listRow",onClick:e[0]||(e[0]=t=>l.goToPage("sklist"))},e[10]||(e[10]=[n("div",null,[n("p",{class:"textFonte"},"简介")],-1),n("div",null,[n("p",{class:"subTextFont"},"喜欢研究 UI 的独立开发者"),n("img",{src:"./image/SF-Symbol/chevron.forward.png"})],-1)])),e[12]||(e[12]=n("hr",{class:"listHr"},null,-1)),n("div",{class:"listRow",onClick:e[1]||(e[1]=t=>l.goToPage("sklist"))},e[11]||(e[11]=[n("div",null,[n("p",{class:"textFonte"},"经历")],-1),n("div",null,[n("p",{class:"subTextFont"},"iOS 开发、前端开发、UI 设计 等"),n("img",{src:"./image/SF-Symbol/chevron.forward.png"})],-1)])),n("div",F,[n("div",_,[(c(!0),d(m,null,h(l.getSkIconList,t=>(c(),d("div",null,[n("img",{src:`./image/skill/${t.image}`,class:"skillImage",width:t.size,style:p(`margin-right: ${t.marginRight}px;`)},null,12,H)]))),256))],512)],512)]),n("nav",R,[n("div",null,[n("span",{id:"all",onClick:e[2]||(e[2]=t=>l.setFilterType("all"))},"全部"),n("span",{id:"project",onClick:e[3]||(e[3]=t=>l.setFilterType("project"))},"项目"),n("span",{id:"video",onClick:e[4]||(e[4]=t=>l.setFilterType("video"))},"视频"),n("span",{id:"essay",onClick:e[5]||(e[5]=t=>l.setFilterType("essay"))},"文章")])]),n("div",q,[(c(!0),d(m,null,h(l.filteredList,t=>(c(),d("div",{key:t.id},[n("div",{class:E(`controlBlur ${t.type}`),onClick:r=>l.goToPage("content",t.type,t.title)},[n("div",null,[t.image?(c(),d("img",{key:0,src:`./image/${t.image}`},null,8,A)):S("",!0),n("div",null,[n("p",null,f(t.title),1),n("p",null,f(t.createDate),1)])]),n("div",null,[(c(!0),d(m,null,h(t.tag,r=>(c(),d("div",null,[n("div",V,f(r),1)]))),256))]),n("p",null,f(t.info),1)],10,z)]))),128))])])],512)}const J=k(x,[["render",O],["__scopeId","data-v-a7693ace"]]);export{J as default};
