import{_ as I,r as f,o as M,a as z,b as t,d as s,v as B,c as R,i as D,n as W,e as a,g as i,t as l,F as T,h as S}from"./index-BB8GJ1nf.js";import{a as E,g as L}from"./function-aY7JZtoC.js";const V={name:"Waterfall",props:{columnCount:{type:Number,default:2}},setup(b){const e=f(null);let v=null,m=null,_=0;const h=()=>{const p=e.value;if(!p)return;const d=Array.from(p.children),u=p.offsetWidth,g=u<240?1:Math.min(Math.floor(u/220),b.columnCount),c=new Array(g).fill(0),k=(u-(g-1)*10)/g;d.forEach(x=>{const o=x.offsetHeight,n=c.indexOf(Math.min(...c));x.style.width=`${k}px`,x.style.top=`${c[n]+10}px`,x.style.left=`${n*k+n*10}px`,c[n]+=o+10}),p.style.height=`${Math.max(...c)}px`},$=()=>{m=setInterval(()=>{h()},300)},w=()=>{m&&(clearInterval(m),m=null)},y=()=>{const p=e.value;if(!p)return;const d=p.offsetWidth;d!==_&&(h(),_=d)};return M(()=>{v=new ResizeObserver(y),e.value&&v.observe(e.value),$()}),z(()=>{v&&v.disconnect(),w()}),{waterfallContainer:e}}},j={id:"waterfall",class:"cardModule",ref:"waterfallContainer"};function H(b,e,v,m,_,h){return t(),s("div",j,[B(b.$slots,"default",{},void 0)],512)}const Ne=I(V,[["render",H],["__scopeId","data-v-c8c5cac6"]]),q=["src","width"],P={class:"dateText"},G={key:0},U={key:0,style:{display:"flex","align-items":"center",gap:"5px"}},J={class:"setTag"},K={key:0,style:{"padding-left":"3px"}},Q={key:1,style:{"padding-left":"3px"}},X={key:0,class:"tagDivider"},Y={class:"tag"},Z={key:1,class:"info"},ee=["src"],te={class:"title"},se={class:"dateText"},ie={key:0},ae={key:0,style:{display:"flex","align-items":"center",gap:"5px"}},ne={class:"setTag"},oe={key:0,style:{"padding-left":"3px"}},le={key:1,style:{"padding-left":"3px"}},re={key:0,class:"tagDivider"},de={class:"tag"},ce={key:0,class:"info"},ue=["src"],me={class:"title"},ve={class:"dateText"},pe={key:0},fe={key:0,style:{display:"flex","align-items":"center",gap:"5px"}},ge={class:"setTag"},_e={key:0,style:{"padding-left":"3px"}},he={key:1,style:{"padding-left":"3px"}},ye={key:0,class:"tagDivider"},ke={class:"tag"},xe={key:1,class:"info"},be=["src"],we={class:"title"},Ce={class:"dateText"},$e={key:0},De={key:0,style:{display:"flex","align-items":"center",gap:"5px"}},We={class:"setTag"},Te={key:0,style:{"padding-left":"3px"}},Se={key:1,style:{"padding-left":"3px"}},ze={key:0,class:"tagDivider"},Re={class:"tag"},Ee={key:1,class:"info"},Ie={__name:"CardView",props:{item:{type:Object,required:!0},radius:{type:Number,default:10}},setup(b){const e=b,v=R(()=>e.item.tag?e.item.tag:[]),m=f(null),_=f(0),h=f(0),$=f(0),w=f(!0);let y;function p(){if(m.value){const o=m.value.getBoundingClientRect().width;_.value=Math.min(o/7>30?o/7:20,70),h.value=Math.min(o/3,120),$.value=Math.min(o/13>20?o/13:20,30);const n=300;w.value=o>=n}}const d=f(0),u=f(0);e.item.sub&&e.item.sub.forEach(o=>{o.sub?u.value++:d.value++}),fetch("./json/tagTheme.json").then(o=>o.json()).then(o=>{Array.from(document.getElementsByClassName("tag")).forEach(n=>{const r=n.textContent.trim(),C=getComputedStyle(n).getPropertyValue("--tagColor");o[r]?(n.style.backgroundColor=o[r],n.style.color=E(o[r])):(n.style.backgroundColor=C,n.style.color=E(C))})});const g=R(()=>L(e.item.path)),c=f(null),k=()=>{if(!c.value)return;const o=c.value,n=o.scrollLeft,r=o.scrollWidth-o.clientWidth,C=20,A=n<=0,N=n>=r,O=A?0:C,F=N?100:100-C;o.style.mask=`
        linear-gradient(
            90deg,
            transparent 0,
            #fff ${O}%,
            #fff ${F}%,
            transparent 100%
        )
    `},x=()=>{if(!c.value)return;let o;const n=c.value,r=()=>{window.cancelAnimationFrame(o),o=window.requestAnimationFrame(k)};return n.addEventListener("scroll",r),setTimeout(()=>{k()},500),()=>{n.removeEventListener("scroll",r)}};return M(()=>{if(m.value){const n=()=>{p(),k()};y=new ResizeObserver(n),y.observe(m.value)}const o=x();z(()=>{o&&o()})}),z(()=>{y&&y.disconnect()}),(o,n)=>(t(),s("div",{ref_key:"viewRef",ref:m,style:W(`border-radius: ${e.radius}px; overflow: hidden;`)},[e.item.view==="module"?(t(),s("div",{key:0,class:D(e.item.view),style:W(`padding: ${_.value}px;`)},[a("div",null,[e.item.image?(t(),s("img",{key:0,src:`./image/${e.item.image}`,width:h.value},null,8,q)):i("",!0),a("div",null,[a("p",{class:"title",style:W(`font-size: ${$.value}px;`)},l(g.value),5),a("div",P,[a("span",null,l(e.item.createDate),1),e.item.updateDate?(t(),s("span",G," 至 "+l(e.item.updateDate),1)):i("",!0)])])]),e.item.sub||e.item.tag?(t(),s("div",{key:0,class:"tagContainer",ref_key:"tagContainerRef",ref:c},[e.item.sub?(t(),s("div",U,[a("div",J,[n[0]||(n[0]=a("span",{style:{"border-right":"1px solid black","padding-right":"3px"}},"合集",-1)),d.value>0?(t(),s("span",K,"文章"+l(d.value),1)):i("",!0),u.value>0?(t(),s("span",Q,"合集"+l(u.value),1)):i("",!0)]),e.item.tag?(t(),s("div",X)):i("",!0)])):i("",!0),(t(!0),s(T,null,S(v.value,r=>(t(),s("div",{key:r},[a("div",Y,l(r),1)]))),128))],512)):i("",!0),w.value&&e.item.info?(t(),s("p",Z,l(e.item.info),1)):i("",!0)],6)):i("",!0),e.item.view==="set"?(t(),s("div",{key:1,class:D(e.item.view)},[a("div",null,[e.item.image?(t(),s("img",{key:0,src:`./image/${e.item.image}`},null,8,ee)):i("",!0),a("div",{style:W(e.item.image?"width: calc(100% - 80px);":"width: 100%;")},[a("p",te,l(g.value),1),a("div",se,[a("span",null,l(e.item.createDate),1),e.item.updateDate?(t(),s("span",ie," 至 "+l(e.item.updateDate),1)):i("",!0)]),e.item.sub||e.item.tag?(t(),s("div",{key:0,class:"tagContainer",ref_key:"tagContainerRef",ref:c},[e.item.sub?(t(),s("div",ae,[a("div",ne,[n[1]||(n[1]=a("span",{style:{"border-right":"1px solid black","padding-right":"3px"}},"合集",-1)),d.value>0?(t(),s("span",oe,"文章"+l(d.value),1)):i("",!0),u.value>0?(t(),s("span",le,"合集"+l(u.value),1)):i("",!0)]),e.item.tag?(t(),s("div",re)):i("",!0)])):i("",!0),(t(!0),s(T,null,S(v.value,r=>(t(),s("div",{key:r},[a("div",de,l(r),1)]))),128))],512)):i("",!0)],4)]),e.item.info?(t(),s("p",ce,l(e.item.info),1)):i("",!0)],2)):i("",!0),e.item.view==="cover"?(t(),s("div",{key:2,class:D(e.item.view)},[e.item.image?(t(),s("img",{key:0,src:`./image/${e.item.image}`},null,8,ue)):i("",!0),a("div",null,[a("p",me,l(g.value),1),a("div",ve,[a("span",null,l(e.item.createDate),1),e.item.updateDate?(t(),s("span",pe," 至 "+l(e.item.updateDate),1)):i("",!0)]),e.item.sub||e.item.tag?(t(),s("div",{key:0,class:"tagContainer",ref_key:"tagContainerRef",ref:c},[e.item.sub?(t(),s("div",fe,[a("div",ge,[n[2]||(n[2]=a("span",{style:{"border-right":"1px solid black","padding-right":"3px"}},"合集",-1)),d.value>0?(t(),s("span",_e,"文章"+l(d.value),1)):i("",!0),u.value>0?(t(),s("span",he,"合集"+l(u.value),1)):i("",!0)]),e.item.tag?(t(),s("div",ye)):i("",!0)])):i("",!0),(t(!0),s(T,null,S(v.value,r=>(t(),s("div",{key:r},[a("div",ke,l(r),1)]))),128))],512)):i("",!0),w.value&&e.item.info?(t(),s("p",xe,l(e.item.info),1)):i("",!0)])],2)):i("",!0),e.item.view==="essay"?(t(),s("div",{key:3,class:D(e.item.view)},[a("div",null,[e.item.image?(t(),s("img",{key:0,src:`./image/${e.item.image}`},null,8,be)):i("",!0),a("div",null,[a("p",we,l(g.value),1),a("div",Ce,[a("span",null,l(e.item.createDate),1),e.item.updateDate?(t(),s("span",$e," 至 "+l(e.item.updateDate),1)):i("",!0)])])]),e.item.sub||e.item.tag?(t(),s("div",{key:0,class:"tagContainer",ref_key:"tagContainerRef",ref:c},[e.item.sub?(t(),s("div",De,[a("div",We,[n[3]||(n[3]=a("span",{style:{"border-right":"1px solid black","padding-right":"3px"}},"合集",-1)),d.value>0?(t(),s("span",Te,"文章"+l(d.value),1)):i("",!0),u.value>0?(t(),s("span",Se,"合集"+l(u.value),1)):i("",!0)]),e.item.tag?(t(),s("div",ze)):i("",!0)])):i("",!0),(t(!0),s(T,null,S(v.value,r=>(t(),s("div",{key:r},[a("div",Re,l(r),1)]))),128))],512)):i("",!0),e.item.info?(t(),s("p",Ee,l(e.item.info),1)):i("",!0)],2)):i("",!0)],4))}},Oe=I(Ie,[["__scopeId","data-v-d7db5d75"]]);export{Oe as C,Ne as W};
