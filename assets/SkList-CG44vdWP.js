import{_ as v,r as m,o as f,a as g,c as d,e as s,F as k,j as p,b as u,t as h}from"./index-B2Xsg-ZU.js";function I(t){t>20?(document.getElementById("navTop-skList").classList.add("navBackground","navBackgroundDivider"),document.getElementById("navTitle-skList").classList.add("navShow"),document.getElementById("navTitle-skList").classList.remove("navHidden")):(document.getElementById("navTop-skList").classList.remove("navBackground","navBackgroundDivider"),document.getElementById("navTitle-skList").classList.remove("navShow"),document.getElementById("navTitle-skList").classList.add("navHidden"))}const L={data(){return{skList:[]}},setup(){const t=m(null);function e(){I(t.value.scrollTop)}return f(()=>{t.value&&t.value.addEventListener("scroll",e)}),g(()=>{t.value&&t.value.removeEventListener("scroll",e)}),{scrollView:t}},methods:{goBack(){const t=this.$router.options.routes,e=this.$router.currentRoute;t.findIndex(o=>o.path===e.value.path)>0?this.$router.back():this.$router.push("/")},goToPage(t,e,n){const o=this.$route.name;o!==t?e&&n?this.$router.push({name:t,query:{path:e,title:n}}):this.$router.push({name:t}):this.$router.replace({name:o,query:{path:e,title:n}})},fetchData(){fetch("./json/skInfo.json").then(t=>t.json()).then(t=>{this.skList=t}),this.$nextTick(()=>{this.arrangeWaterfall(),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},350)})},arrangeWaterfall(){const t=document.getElementById("skillListModule"),e=Array.from(t.children).map(i=>i.children[0]),n=t.offsetWidth,o=n<300?1:Math.min(Math.floor(n/300),2),r=new Array(o).fill(0),l=(n-(o-1)*10)/o;e.forEach(i=>{const c=i.offsetHeight,a=r.indexOf(Math.min(...r));i.style.width=`${l}px`,i.style.top=`${r[a]+10}px`,i.style.left=`${a*l+a*10}px`,r[a]+=c+10}),t.style.height=`${Math.max(...r)}px`},startWaterfallInterval(){this.intervalId=setInterval(()=>{this.intervalCount++,this.intervalCount<=30&&this.arrangeWaterfall()},300)},stopWaterfallInterval(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},onResize(){const t=document.getElementById("skillListModule");if(!t)return;const e=t.offsetWidth;e!==this.lastWidth&&(this.arrangeWaterfall(),this.lastWidth=e,this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},350))}},beforeDestroy(){this.resizeObserver&&this.resizeObserver.disconnect(),this.stopWaterfallInterval()},computed:{getSkList(){return this.skList}},mounted(){this.fetchData(),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},350),this.resizeObserver=new ResizeObserver(e=>{window.requestAnimationFrame(()=>{this.onResize()})});const t=document.getElementById("skillListModule");t?this.resizeObserver.observe(t):console.error("未找到 #skillListModule 容器元素"),this.startWaterfallInterval()}},y={ref:"scrollView"},T={id:"navTop-skList"},B={class:"contentView backgroundBlur"},W={id:"skillListModule",class:"skillListModule"},_=["onClick"],$=["src"],x={class:"titleFont"},b={class:"textFont"};function w(t,e,n,o,r,l){return u(),d("div",y,[s("nav",T,[s("div",{onClick:e[0]||(e[0]=i=>l.goBack())},e[1]||(e[1]=[s("img",{src:"./image/SF-Symbol/chevron.backward.png"},null,-1),s("span",null,"返回",-1)])),e[2]||(e[2]=s("div",{id:"navTitle-skList",class:"navHidden"},[s("span",null,"我的经历")],-1)),e[3]||(e[3]=s("div",null,null,-1))]),s("div",B,[e[4]||(e[4]=s("div",null,[s("h1",{class:"largeTitleFont"},"我的经历")],-1)),s("div",W,[(u(!0),d(k,null,p(l.getSkList,i=>(u(),d("div",null,[s("div",{onClick:c=>l.goToPage("skinfo",i.type,i.title)},[s("img",{src:`./image/${i.image}`},null,8,$),s("div",null,[s("p",x,h(i.title),1),s("p",b,h(i.info),1)])],8,_)]))),256))])])],512)}const M=v(L,[["render",w],["__scopeId","data-v-07babae5"]]);export{M as default};
