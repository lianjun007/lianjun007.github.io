import{_ as R,c as k,r as g,v as W,o as C,a as S,b as u,d as f,z as v,e as x,f as b,w as M,p as V,n as E,g as h,T as D,j as H,m as w,t as L,i as P,G as q,F,h as j}from"./index-fZg3IRHp.js";import{_ as $}from"./SvgIcon-s4K2pPYI.js";const G={class:"menuContainer"},U={__name:"MultilevelMenu",props:{position:{type:Array,default:()=>[20,5,0,0]},selectRadius:{type:Number,default:5},mouseOpen:{type:Boolean,default:!0},minWidth:{type:Number,default:180}},emits:["isOpen"],setup(m,{emit:t}){const e=m,d=k(()=>{const n={};return e.position[0]!==0&&(n.top=`${e.position[0]}px`),e.position[1]!==0&&(n.right=`${e.position[1]}px`),e.position[2]!==0&&(n.bottom=`${e.position[2]}px`),e.position[3]!==0&&(n.left=`${e.position[3]}px`),n.minWidth=`${e.minWidth}px`,n}),o=g(null),s=g(!1),i=t;W(s,()=>{i("isOpen",s.value)});const r=g(!1),l=g(!1);function y(){const n=o.value.querySelector(".menuContainer .multilevelMenuList"),a=Array.from(n.children);for(let c=a.length-1;c>0;c--){const I=a[c],O=a[c-1];if(I.tagName==="DIV"&&O.tagName==="DIV"){const B=document.createElement("hr");B.className="menuHr",n.insertBefore(B,I)}}}function p(n){if(n&&(r.value=!0),s.value=!0,l.value=!1,o.value.parentNode){const a=o.value.parentNode;a&&a.classList.contains("multilevelMenuList")?o.value.classList.add("subSelectedBackground"):(o.value.classList.add("selectedBackground"),o.value.style.borderRadius=`${e.selectRadius}px`)}H(()=>{y()})}function _(n,a=!1){if(!o.value)return;a||r.value&&!o.value.contains(n.target)?(c(),r.value=!1):!r.value&&o.value.contains(n.target)&&c();function c(){s.value=!1,o.value.classList.remove("selectedBackground","subSelectedBackground")}}const T=[];C(()=>{window.addEventListener("click",_);let n=o.value.parentElement;for(;n;){const a=c=>_(c,!0);n.addEventListener("scroll",a),T.push({element:n,eventType:"scroll",listener:a}),n=n.parentElement}}),S(()=>{window.removeEventListener("click",_),T.forEach(({element:n,eventType:a,listener:c})=>{n.removeEventListener(a,c)})});function A(n){n.stopPropagation(),s.value&&r.value?_(n,!0):p(!0)}function z(){e.mouseOpen&&p(!1)}function N(n){!e.mouseOpen||!s.value||(l.value=!0,setTimeout(()=>{l.value===!0&&_(n)},200))}return(n,a)=>(u(),f("div",{ref_key:"multilevelMenu",ref:o,onClick:A,onMouseenter:z,onMouseleave:N,style:{"z-index":"1"}},[v(n.$slots,"default",{},void 0),x("div",G,[b(D,{name:"fade"},{default:M(()=>[s.value?(u(),f("div",{key:0,onClick:a[0]||(a[0]=V(c=>console.error("菜单选项未绑定点击事件"),["stop"])),class:"multilevelMenuList",style:E(d.value)},[v(n.$slots,"menuList",{},void 0,!0)],4)):h("",!0)]),_:3})])],544))}},J=R(U,[["__scopeId","data-v-4eef4474"]]),K={class:"listRow"},Q={key:0},X={key:1},Y={__name:"ListRow",props:{mainIcon:{type:String},main:{type:String,default:" "},sub:{type:String},subIcon:{type:String},textModule:{type:String,default:"auto"}},setup(m){const t=m,e=g(null),d=k(()=>t.textModule==="row"?"listRowTextRow":t.textModule==="column"?"listRowTextColumn":"listRowTextRow"),o=g(null);function s(){if(!e.value)return;const i=e.value.getBoundingClientRect().width;let r=0;o.value||Array.from(e.value.children).forEach(l=>{o.value+=l.getBoundingClientRect().width}),i>o.value+20?(e.value.classList.remove("listRowTextColumn"),e.value.classList.add("listRowTextRow"),o.value=r):(e.value.classList.remove("listRowTextRow"),e.value.classList.add("listRowTextColumn"))}return C(()=>{t.textModule==="auto"&&(s(),window.addEventListener("resize",s))}),S(()=>{t.textModule==="auto"&&window.removeEventListener("resize",s)}),(i,r)=>(u(),f("div",K,[v(i.$slots,"mainIcon",{},void 0),!i.$slots.mainIcon&&t.mainIcon?(u(),w($,{key:0,option:t.mainIcon},null,8,["option"])):h("",!0),x("div",{ref_key:"textContainer",ref:e,class:P(d.value)},[v(i.$slots,"main",{},void 0),!i.$slots.main&&t.main?(u(),f("span",Q,L(t.main),1)):h("",!0),v(i.$slots,"sub",{},void 0),!i.$slots.sub&&t.sub?(u(),f("span",X,L(t.sub),1)):h("",!0)],2),v(i.$slots,"subIcon",{},void 0),!i.$slots.subIcon&&t.subIcon?(u(),w($,{key:1,option:t.subIcon},null,8,["option"])):h("",!0)]))}},Z=R(Y,[["__scopeId","data-v-df6d417f"]]),ee={class:"iconButton"},te={__name:"IconButton",props:{main:{type:String,required:!0},icon:{type:String},iconLeft:{type:Boolean,default:!0},color:{type:String,default:"var(--subTextColor)"},marginLeft:{type:String,default:"3px"},marginRight:{type:String,default:"3px"}},setup(m){q(e=>({"5caf46de":t.marginRight,"1b1309f6":t.marginLeft}));const t=m;return(e,d)=>(u(),f("div",ee,[v(e.$slots,"iconLeft",{},void 0),!e.$slots.iconLeft&&!e.$slots.iconRight&&t.iconLeft?(u(),w($,{key:0,option:t.icon,color:t.color},null,8,["option","color"])):h("",!0),x("span",{style:E(`color: ${t.color};`)},L(t.main),5),v(e.$slots,"iconRight",{},void 0),!e.$slots.iconRight&&!e.$slots.iconLeft&&!t.iconLeft?(u(),w($,{key:1,option:t.icon,color:t.color},null,8,["option","color"])):h("",!0)]))}},ne=R(te,[["__scopeId","data-v-3ea6571d"]]),oe={ref:"selectButton"},ce={__name:"SelectButton",props:{options:{type:Array,required:!0},values:{type:Array},color:{type:String,default:"var(--subTextColor)"},initialValue:{type:String}},emits:["select-change"],setup(m,{emit:t}){const e=m,d=g(e.initialValue?e.initialValue:e.values?e.values[0]:e.options[0]),o=t;function s(l){o("select-change",l),d.value=l}const i=k(()=>{const l=r.value.find(y=>y.value===d.value);return l?l.label:r.value[0].label}),r=k(()=>{const l=e.values||e.options;return e.options.map((y,p)=>({label:y,value:l[p]}))});return C(()=>{s(d.value)}),(l,y)=>(u(),f("div",oe,[b(J,{"mouse-open":!1,"min-width":0},{menuList:M(()=>[(u(!0),f(F,null,j(r.value,p=>(u(),w(Z,{onClick:V(_=>s(p.value),["stop"]),key:p.label,"text-module":"row",value:p.value,main:p.label},{mainIcon:M(()=>[b($,{size:15,src:d.value===p.value?"./image/SF-Symbol/checkmark.svg":"./image/none.svg"},null,8,["src"])]),_:2},1032,["onClick","value","main"]))),128))]),default:M(()=>[b(ne,{color:e.color,main:i.value,iconLeft:!1,icon:"upAndDown"},null,8,["color","main"])]),_:1})],512))}},se={class:"listViewContainer"},ie={key:0,class:"header"},le={key:1,class:"footnote"},ae={__name:"ListView",props:{header:{type:String},footnote:{type:String}},setup(m){const t=m,e=g(null);function d(){let s=!1;Array.from(e.value.children).forEach(i=>{i.classList.contains("listRow")&&(s?i.insertAdjacentHTML("beforebegin","<hr class='listRowHr'>"):s=!0)})}function o(){let s=0,i=0;e.value&&(Array.from(e.value.children).forEach((r,l)=>{l===0?s=r.getBoundingClientRect().top:l===e.value.children.length-1&&(i=r.getBoundingClientRect().bottom)}),e.value.style.height=`${i-s}px`)}return C(()=>{e.value&&(d(),setTimeout(o,300),setTimeout(o,1e3),setTimeout(o,2e3),setTimeout(o,3e3),setTimeout(o,5e3),window.addEventListener("resize",o))}),S(()=>{e.value&&window.removeEventListener("resize",o)}),(s,i)=>(u(),f("div",se,[t.header?(u(),f("div",ie,L(t.header),1)):h("",!0),x("div",{ref_key:"listView",ref:e,class:"listView blur"},[v(s.$slots,"default",{},void 0)],512),t.footnote?(u(),f("div",le,L(t.footnote),1)):h("",!0)]))}},de=R(ae,[["__scopeId","data-v-5f2604ab"]]);export{ne as I,de as L,J as M,ce as _,Z as a};
