import{_ as k,r as u,o as T,a as w,c,b as x,d as n,F as p,e as f,f as h,n as I,t as v}from"./index-DQizotm_.js";const b={setup(){const e=u(null),t=u(325);function a(){e.value&&(e.value.scrollTop>t.value?(document.getElementById("navTop").classList.add("navBackground"),document.getElementById("navTitle").style.opacity=1):(document.getElementById("navTop").classList.remove("navBackground"),document.getElementById("navTitle").style.opacity=0))}const l=u(!1),o=u(null),i=u(null);let s=0,r=.2;function d(){if(i.value){s-=r;const m=i.value.offsetWidth;Math.abs(s)>=m/2&&(s=0),i.value.style.transform=`translateX(${s}px)`,requestAnimationFrame(d)}}const g=()=>{r=0},y=()=>{r=.2};return T(()=>{e.value&&e.value.addEventListener("scroll",a),i.value&&d(),i.value&&(i.value.addEventListener("mouseenter",g),i.value.addEventListener("mouseleave",y))}),w(()=>{e.value&&e.value.removeEventListener("scroll",a)}),{isScrolled:l,scrollView:e,skillScollRow:o,skillScollContainer:i,skillScollRow:o,skillScollContainer:i,showNavTopPara:t}},data(){return{myInfoList:[],linkList:[],skIconList:[],filterType:"all",lastWidth:0}},watch:{filterType(){this.$nextTick(()=>{this.arrangeWaterfall(),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},350)})},$route(e,t){e.path==="/"?(this.showNavTopPara=325,document.documentElement.style.setProperty("--txtop","200px")):(this.showNavTopPara=145,document.documentElement.style.setProperty("--txtop","20px"))}},computed:{filteredList(){return this.filterType==="all"?this.myInfoList:this.myInfoList.filter(e=>e.type===this.filterType)},getlinkList(){return this.linkList},getSkIconList(){return this.skIconList}},mounted(){this.$route.path==="/"?(this.showNavTopPara=325,document.documentElement.style.setProperty("--txtop","200px")):(this.showNavTopPara=145,document.documentElement.style.setProperty("--txtop","20px")),this.fetchData(),this.fetchContentData(),this.resizeObserver=new ResizeObserver(()=>{this.onResize()});const e=document.getElementById("waterfall");e&&this.resizeObserver.observe(e)},beforeDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()},methods:{goToPage(e,t){const a=this.$route.name;a!==e?t?this.$router.push({name:e,query:{title:t}}):this.$router.push({name:e}):this.$router.replace({name:a,query:{title:t}})},setFilterType(e){this.filterType=e,this.$nextTick(()=>{this.arrangeWaterfall()})},fetchContentData(){const e=fetch("./json/project.json").then(l=>l.json()).then(l=>l.map(o=>({...o,type:"project"}))),t=fetch("./json/video.json").then(l=>l.json()).then(l=>l.map(o=>({...o,type:"video"}))),a=fetch("./json/essay.json").then(l=>l.json()).then(l=>l.map(o=>({...o,type:"essay"})));Promise.all([e,t,a]).then(([l,o,i])=>{this.myInfoList=[...l,...o,...i],this.myInfoList.forEach(s=>{s.createDate&&typeof s.createDate=="string"&&(s.createDateSortPara=new Date(s.createDate))}),this.myInfoList.sort((s,r)=>s.createDateSortPara-r.createDateSortPara),this.$nextTick(()=>{this.arrangeWaterfall()})}).catch(l=>console.error("数据加载错误:",l))},fetchData(){fetch("./json/link.json").then(e=>e.json()).then(e=>{this.linkList=e}),fetch("./json/skIcon.json").then(e=>e.json()).then(e=>{this.skIconList=e})},arrangeWaterfall(){document.getElementById("all").style.color="black",document.getElementById("project").style.color="black",document.getElementById("video").style.color="black",document.getElementById("essay").style.color="black",document.getElementById(this.filterType).style.color="#3A6A5E";const e=document.getElementById("waterfall"),t=Array.from(e.children),a=e.offsetWidth,l=Math.min(Math.floor(a/200),4),o=new Array(l).fill(0),i=(a-(l-1)*10)/l;t.forEach(s=>{const r=s.offsetHeight,d=o.indexOf(Math.min(...o));s.style.width=`${i}px`,s.style.top=`${o[d]+10}px`,s.style.left=`${d*i+d*10}px`,o[d]+=r+10}),e.style.height=`${Math.max(...o)}px`},onResize(){const e=document.getElementById("waterfall");if(!e)return;const t=e.offsetWidth;t!==this.lastWidth&&(this.arrangeWaterfall(),this.lastWidth=t,this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},350))},beforeDestroy(){this.observer&&this.observer.disconnect()}}},L={ref:"scrollView"},E={class:"contentView"},_={class:"profilePhotoModule"},S={style:{display:"flex"}},j=["href"],B=["src","title"],P={class:"list"},$={class:"skillScollRow",ref:"skillScollRow",style:{overflow:"hidden"}},W={class:"scrollView",ref:"skillScollContainer",style:{display:"flex",gap:"5px","align-items":"center",padding:"0 16px"}},D=["src","width"],C={class:"navBar"},F={id:"waterfall"},z=["onClick"],M={class:"spaceBetween"},R=["src"],N={style:{width:"100%"}},V={class:"text",style:{"margin-top":"0px","margin-bottom":"7px","white-space":"nowrap"}},O={class:"rightText",style:{margin:"0"}},A={class:"subText",style:{"margin-top":"6px"}};function q(e,t,a,l,o,i){return h(),c("div",L,[t[11]||(t[11]=x('<nav id="navTop" data-v-485db1e8><div data-v-485db1e8><img src="../image/SF-Symbol/phone.png" data-v-485db1e8><span data-v-485db1e8>联系</span></div><div id="navTitle" data-v-485db1e8><img src="./image/lianjun.png" data-v-485db1e8><span data-v-485db1e8>LianJun</span></div><div data-v-485db1e8><img src="../image/SF-Symbol/gearshape.png" data-v-485db1e8><span data-v-485db1e8>设置</span></div></nav>',1)),n("div",E,[n("div",_,[t[6]||(t[6]=n("img",{class:"profilePhoto",src:"./image/lianjun.png"},null,-1)),t[7]||(t[7]=n("p",{class:"largeTitle"},"LianJun",-1)),n("div",S,[(h(!0),c(p,null,f(i.getlinkList,s=>(h(),c("div",null,[n("a",{href:s.link,target:"_blank"},[n("img",{class:"linkButtonImage",src:`./image/link/${s.image}`,title:s.name},null,8,B)],8,j)]))),256)),t[5]||(t[5]=n("div",null,"设置",-1))])]),n("div",P,[t[9]||(t[9]=n("div",{class:"listRow"},[n("p",null,"简介"),n("p",null,"喜欢研究 UI 的独立开发者")],-1)),t[10]||(t[10]=n("hr",null,null,-1)),n("div",{class:"listRow",id:"skillControl",onClick:t[0]||(t[0]=s=>i.goToPage("sklist"))},t[8]||(t[8]=[n("p",{class:"text"},"经历",-1),n("div",{class:"spaceBetween"},[n("p",{class:"rightText",id:"skillSingle"},"iOS 开发、前端开发、UI 设计 等"),n("img",{src:"./image/SF-Symbol/chevron.down.png",class:"listRowEndButtonImage",style:{width:"10px","margin-right":"0","margin-left":"5px"}})],-1)])),n("div",$,[n("div",W,[(h(!0),c(p,null,f(i.getSkIconList,s=>(h(),c("div",null,[n("img",{src:`./image/skill/${s.image}`,class:"skillImage",width:s.size,style:I(`margin-right: ${s.marginRight}px;`)},null,12,D)]))),256))],512)],512)]),n("nav",C,[n("div",null,[n("span",{id:"all",onClick:t[1]||(t[1]=s=>i.setFilterType("all"))},"全部"),n("span",{id:"project",onClick:t[2]||(t[2]=s=>i.setFilterType("project"))},"项目"),n("span",{id:"video",onClick:t[3]||(t[3]=s=>i.setFilterType("video"))},"视频"),n("span",{id:"essay",onClick:t[4]||(t[4]=s=>i.setFilterType("essay"))},"文章")])]),n("div",F,[(h(!0),c(p,null,f(i.filteredList,s=>(h(),c("div",{class:"showList",key:s.id},[n("div",{class:"showView",onClick:r=>i.goToPage("content",s.title)},[n("div",M,[n("img",{src:`./image/${s.image}`,class:"skillGroupImage",style:{width:"45px","margin-right":"10px"}},null,8,R),n("div",N,[n("p",V,v(s.title),1),n("p",O,v(s.createDate),1)])]),n("p",A,v(s.info),1)],8,z)]))),128))])])],512)}const J=k(b,[["render",q],["__scopeId","data-v-485db1e8"]]);export{J as default};
