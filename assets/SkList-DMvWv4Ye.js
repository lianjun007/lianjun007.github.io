import{_ as m,r as v,o as f,a as g,c as d,d as s,F as k,e as p,f as u,t as c}from"./index-D70EzPlQ.js";function L(t){t>20?(document.getElementById("navTop-skList").classList.add("navBackground","navBackgroundDivider"),document.getElementById("navTitle-skList").classList.add("navShow"),document.getElementById("navTitle-skList").classList.remove("navHidden")):(document.getElementById("navTop-skList").classList.remove("navBackground","navBackgroundDivider"),document.getElementById("navTitle-skList").classList.remove("navShow"),document.getElementById("navTitle-skList").classList.add("navHidden"))}const I={data(){return{skList:[]}},setup(){const t=v(null);function e(){L(t.value.scrollTop)}return f(()=>{t.value&&t.value.addEventListener("scroll",e)}),g(()=>{t.value&&t.value.removeEventListener("scroll",e)}),{scrollView:t}},methods:{goBack(){const t=this.$router.options.routes,e=this.$router.currentRoute;t.findIndex(n=>n.path===e.path)>0?this.$router.back():this.$router.push("/")},fetchData(){fetch("./json/skInfo.json").then(t=>t.json()).then(t=>{this.skList=t}),this.$nextTick(()=>{this.arrangeWaterfall(),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},350)})},arrangeWaterfall(){const t=document.getElementById("skillListModule"),e=Array.from(t.children).map(i=>i.children[0]),l=t.offsetWidth,n=Math.min(Math.floor(l/300),2),o=new Array(n).fill(0),r=(l-(n-1)*10)/n;e.forEach(i=>{const h=i.offsetHeight,a=o.indexOf(Math.min(...o));i.style.width=`${r}px`,i.style.top=`${o[a]+10}px`,i.style.left=`${a*r+a*10}px`,o[a]+=h+10,console.log(i.style.left,"grf")}),t.style.height=`${Math.max(...o)}px`},onResize(){const t=document.getElementById("skillListModule");if(!t)return;const e=t.offsetWidth;e!==this.lastWidth&&(this.arrangeWaterfall(),this.lastWidth=e,this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},350))}},beforeDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()},computed:{getSkList(){return this.skList}},mounted(){this.fetchData(),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},350),this.resizeObserver=new ResizeObserver(e=>{window.requestAnimationFrame(()=>{this.onResize()})});const t=document.getElementById("skillListModule");t?this.resizeObserver.observe(t):console.error("未找到 #waterfall 容器元素")}},T={ref:"scrollView"},y={id:"navTop-skList"},B={class:"contentView backgroundBlur"},x={id:"skillListModule",class:"skillListModule"},_=["src"],w={class:"titleFont"},E={class:"textFont"};function W(t,e,l,n,o,r){return u(),d("div",T,[s("nav",y,[s("div",{onClick:e[0]||(e[0]=i=>r.goBack())},e[1]||(e[1]=[s("img",{src:"./image/SF-Symbol/chevron.backward.png"},null,-1),s("span",null,"返回",-1)])),e[2]||(e[2]=s("div",{id:"navTitle-skList",class:"navHidden"},[s("span",{id:"navTitleText"},"我的经历")],-1)),e[3]||(e[3]=s("div",null,null,-1))]),s("div",B,[e[4]||(e[4]=s("div",null,[s("h1",{class:"largeTitleFont"},"我的经历")],-1)),s("div",x,[(u(!0),d(k,null,p(r.getSkList,i=>(u(),d("div",null,[s("div",null,[s("img",{src:`./image/${i.image}`},null,8,_),s("div",null,[s("p",w,c(i.title),1),s("p",E,c(i.info),1)])])]))),256))])])],512)}const b=m(I,[["render",W],["__scopeId","data-v-ac6182b4"]]);export{b as default};
