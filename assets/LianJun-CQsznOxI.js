import{_ as S,r as f,o as b,n as w,a as E,b as u,c as v,d as B,e as n,f as c,w as g,g as x,T as C,F as y,h as k,i as L,j as h,t as T}from"./index-BYlDqPR4.js";import{C as _}from"./CardView-QAtG6TzZ.js";import"./function-aY7JZtoC.js";const $={name:"DropdownMenu",setup(){const t=f(!1),e=f(null),i=()=>{t.value=!0;const o=e.value.parentNode;o&&o.classList.contains("dropDownList")?e.value.classList.add("subSelectBackground"):e.value.classList.add("selectBackground"),w(()=>{const l=e.value.querySelector(".menuContainer .dropDownList");l&&d(l)})},r=o=>{e.value.contains(o.target)||(t.value=!1,e.value.classList.remove("selectBackground","subSelectBackground"))},d=o=>{const l=Array.from(o.children);for(let a=l.length-1;a>0;a--){const m=l[a],s=l[a-1];if(m.tagName==="DIV"&&s.tagName==="DIV"){const p=document.createElement("hr");p.className="menuHr",o.insertBefore(p,m)}}};return b(()=>{w(()=>{document.addEventListener("click",r)})}),E(()=>{document.removeEventListener("click",r)}),{isOpen:t,openDropdown:i,dropdownRef:e}}},D={class:"menuContainer"},F={key:0,class:"dropDownList"};function M(t,e,i,r,d,o){return u(),v("div",{ref:"dropdownRef",onClick:e[0]||(e[0]=(...l)=>r.openDropdown&&r.openDropdown(...l)),style:{"z-index":"1"}},[B(t.$slots,"default",{},void 0),n("div",D,[c(C,{name:"fade"},{default:g(()=>[r.isOpen?(u(),v("div",F,[B(t.$slots,"menuList",{},void 0,!0)])):x("",!0)]),_:3})])],512)}const W=S($,[["render",M],["__scopeId","data-v-f4d79a6d"]]),P={name:"SvgIcon",props:{src:{type:String,required:!0},color:{type:String,default:"var(--themeColor)"}},data(){return{svgContent:""}},watch:{src:"loadSvg",color:"updateSvgColor"},mounted(){this.loadSvg()},methods:{async loadSvg(){try{const t=await fetch(this.src);if(!t.ok)throw new Error(`Failed to fetch SVG: ${t.statusText}`);const e=await t.text();this.svgContent=e,this.updateSvgColor()}catch(t){console.error("Failed to load SVG:",t),this.svgContent="<svg><text x='10' y='20'>SVG Error</text></svg>"}},updateSvgColor(){if(!this.svgContent)return;const i=new DOMParser().parseFromString(this.svgContent,"image/svg+xml").querySelector("svg");i&&(i.querySelectorAll("[fill]").forEach(r=>{r.setAttribute("fill",this.color)}),i.querySelectorAll("[stroke]").forEach(r=>{r.setAttribute("stroke",this.color)}),this.svgContent=i.outerHTML)}}},j=["innerHTML"];function H(t,e,i,r,d,o){return u(),v("div",{innerHTML:d.svgContent,class:"svgIcon"},null,8,j)}const A=S(P,[["render",H]]);function R(t,e){t>e?(document.getElementById("navTop").classList.add("navBackground","navBackgroundDivider"),document.getElementById("navTitle").classList.add("navShow"),document.getElementById("navTitle").classList.remove("navHidden"),document.querySelector(".contentBackground").classList.add("backgroundBlur"),document.querySelectorAll(".blur").forEach(i=>{i.classList.remove("blur"),i.classList.add("unblur")})):(document.getElementById("navTop").classList.remove("navBackground","navBackgroundDivider"),document.getElementById("navTitle").classList.remove("navShow"),document.getElementById("navTitle").classList.add("navHidden"),document.querySelector(".contentBackground").classList.remove("backgroundBlur"),document.querySelectorAll(".unblur").forEach(i=>{i.classList.add("blur"),i.classList.remove("unblur")})),t>e+80?(document.getElementById("navLeft").classList.remove("navHidden"),document.getElementById("navLeft").classList.add("navShow"),document.getElementById("navRight").classList.remove("navHidden"),document.getElementById("navRight").classList.add("navShow")):(document.getElementById("navLeft").classList.remove("navShow"),document.getElementById("navLeft").classList.add("navHidden"),document.getElementById("navRight").classList.remove("navShow"),document.getElementById("navRight").classList.add("navHidden")),t>e+250?(document.querySelector(".navBar").classList.add("navBarTop","navBackgroundDivider"),document.getElementById("navTop").classList.remove("navBackgroundDivider"),document.documentElement.style.setProperty("--contentBackgroundTop","88px")):(document.querySelector(".navBar").classList.remove("navBarTop","navBackgroundDivider"),document.documentElement.style.setProperty("--contentBackgroundTop","44px"),t>e&&document.getElementById("navTop").classList.add("navBackgroundDivider"))}const q={components:{Dropdown:W,SvgIcon:A,CardView:_},data(){return{intervalId:null,intervalCount:0,myInfoList:[],linkList:[],skIconList:[],filterType:"all",lastWidth:0}},setup(){const t=f(null),e=f(325);function i(){R(t.value.scrollTop,e.value)}const r=f(!1),d=f(null),o=f(null);let l=0,a=.2;function m(){if(o.value){l-=a;const I=o.value.offsetWidth;Math.abs(l)>=I/2&&(l=0),o.value.style.transform=`translateX(${l}px)`,requestAnimationFrame(m)}}const s=()=>{a=0},p=()=>{a=.2};return b(()=>{t.value&&t.value.addEventListener("scroll",i),o.value&&m(),o.value&&(o.value.addEventListener("mouseenter",s),o.value.addEventListener("mouseleave",p))}),E(()=>{t.value&&t.value.removeEventListener("scroll",i)}),{isScrolled:r,scrollView:t,skillScollRow:d,skillScollContainer:o,skillScollRow:d,skillScollContainer:o,showNavTopPara:e}},mounted(){this.$route.path==="/"?(this.showNavTopPara=325,document.documentElement.style.setProperty("--profilePhotoModuleMarginTop","200px")):(this.showNavTopPara=145,document.documentElement.style.setProperty("--profilePhotoModuleMarginTop","20px")),this.fetchData(),this.fetchContentData(),this.resizeObserver=new ResizeObserver(e=>{window.requestAnimationFrame(()=>{this.onResize()})});const t=document.getElementById("waterfall");t?this.resizeObserver.observe(t):console.error("未找到 #waterfall 容器元素"),this.startWaterfallInterval()},computed:{filteredList(){return this.filterType==="all"?this.myInfoList:this.myInfoList.filter(t=>t.type===this.filterType)},getlinkList(){return this.linkList},getSkIconList(){return this.skIconList}},beforeDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()},watch:{filterType(){this.$nextTick(()=>{this.arrangeWaterfall(),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},50)})},$route(t,e){t.path==="/"?(this.showNavTopPara=325,document.documentElement.style.setProperty("--profilePhotoModuleMarginTop","200px")):(this.showNavTopPara=145,document.documentElement.style.setProperty("--profilePhotoModuleMarginTop","20px"))}},methods:{openLink(t){t.startsWith("mailto:")?location.assign(t):window.open(t,"_blank")},goToPage(t,e){e?this.$router.push({name:t,query:{path:e}}):this.$router.push({name:t})},setFilterType(t){this.filterType=t,this.$nextTick(()=>{this.arrangeWaterfall()})},fetchContentData(){fetch("./json/index.json").then(t=>t.json()).then(t=>{Object.keys(t).forEach(i=>{this.myInfoList.push(...t[i].slice(1).map(r=>({...r,type:t[i][0]})))})})},fetchData(){fetch("./json/link.json").then(t=>t.json()).then(t=>{this.linkList=t}),fetch("./json/skIcon.json").then(t=>t.json()).then(t=>{this.skIconList=t})},arrangeWaterfall(){console.log("重新布局"),document.getElementById("all").style.color="black",document.getElementById("project").style.color="black",document.getElementById("video").style.color="black",document.getElementById("essay").style.color="black",document.getElementById(this.filterType).style.color="#3A6A5E";const t=document.getElementById("waterfall"),e=Array.from(t.children),i=t.offsetWidth,r=i<240?1:Math.min(Math.floor(i/220),4),d=new Array(r).fill(0),o=(i-(r-1)*10)/r;e.forEach(l=>{const a=l.offsetHeight,m=d.indexOf(Math.min(...d));l.style.width=`${o}px`,l.style.top=`${d[m]+10}px`,l.style.left=`${m*o+m*10}px`,d[m]+=a+10}),t.style.height=`${Math.max(...d)}px`},startWaterfallInterval(){this.intervalId=setInterval(()=>{this.intervalCount++,this.intervalCount<=30&&this.arrangeWaterfall()},300)},stopWaterfallInterval(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},onResize(){const t=document.getElementById("waterfall");if(!t)return;const e=t.offsetWidth;e!==this.lastWidth&&(this.arrangeWaterfall(),this.lastWidth=e,this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},350))},beforeDestroy(){this.observer&&this.observer.disconnect(),this.stopWaterfallInterval()}}},V={ref:"scrollView"},O={id:"navTop"},z=["onClick"],N=["src","title"],G={class:"contentView"},J={class:"profilePhotoModule"},U={class:"linkAndSetting"},X={class:"blur"},K=["href"],Q=["src","title"],Y=["onClick"],Z=["src","title"],ee={class:"list blur"},te={class:"skillScollRow",ref:"skillScollRow",style:{overflow:"hidden"}},ne={class:"scrollView",ref:"skillScollContainer",style:{display:"flex",gap:"5px","align-items":"center",padding:"0 16px"}},se=["src","width"],oe={class:"navBar"},le={id:"waterfall",class:"cardModule"};function ie(t,e,i,r,d,o){const l=L("SvgIcon"),a=L("Dropdown"),m=L("CardView");return u(),v("div",V,[n("nav",O,[n("div",{id:"navLeft",class:"navHidden",onClick:e[0]||(e[0]=s=>o.goToPage("lianjun"))},[c(l,{src:"./image/SF-Symbol/house.svg"}),e[7]||(e[7]=n("span",null,"主页",-1))]),e[11]||(e[11]=n("div",{id:"navTitle",class:"navHidden"},[n("img",{src:"./image/lianjun.png"}),n("span",null,"LianJun")],-1)),c(a,{id:"navRight",class:"navHidden"},{menuList:g(()=>[n("div",null,[c(l,{src:"./image/SF-Symbol/gearshape.svg"}),e[8]||(e[8]=n("span",null,"设置",-1))]),c(a,null,{menuList:g(()=>[(u(!0),v(y,null,k(o.getlinkList,s=>(u(),v("div",{onClick:p=>o.openLink(s.link)},[n("div",null,[n("img",{src:`./image/link/${s.image}`,title:s.name,style:h(`width: 23px; height: 23px; padding: ${s.padding}px;`)},null,12,N),n("span",{style:h(`color: ${s.color};`)},T(s.name),5)]),c(l,{src:"./image/SF-Symbol/link.svg",color:s.color},null,8,["color"])],8,z))),256))]),default:g(()=>[c(l,{src:"./image/SF-Symbol/phone.svg"}),e[9]||(e[9]=n("span",null,"联系",-1))]),_:1})]),default:g(()=>[c(l,{src:"./image/SF-Symbol/list.bullet.svg"}),e[10]||(e[10]=n("span",null,"功能",-1))]),_:1})]),n("div",G,[e[20]||(e[20]=n("div",{class:"contentBackground"},null,-1)),n("div",J,[e[16]||(e[16]=n("div",null,[n("img",{src:"./image/lianjun.png"}),n("p",null,"LianJun")],-1)),n("div",U,[(u(!0),v(y,null,k(o.getlinkList,s=>(u(),v("div",null,[n("div",X,[n("a",{href:s.link,target:"_blank"},[n("img",{src:`./image/link/${s.image}`,title:s.name,style:h(`padding: ${s.padding}px;`)},null,12,Q)],8,K)])]))),256)),e[15]||(e[15]=n("div",{class:"divider blur"},null,-1)),c(a,null,{menuList:g(()=>[n("div",null,[c(l,{src:"./image/SF-Symbol/gearshape.svg"}),e[12]||(e[12]=n("span",null,"设置",-1))]),c(a,null,{menuList:g(()=>[(u(!0),v(y,null,k(o.getlinkList,s=>(u(),v("div",{onClick:p=>o.openLink(s.link)},[n("img",{src:`./image/link/${s.image}`,title:s.name,style:h(`width: 23px; height: 23px; padding: ${s.padding}px;`)},null,12,Z),n("div",null,[n("span",{style:h(`color: ${s.color};`)},T(s.name),5),c(l,{src:"./image/SF-Symbol/link.svg",color:s.color},null,8,["color"])])],8,Y))),256))]),default:g(()=>[c(l,{src:"./image/SF-Symbol/phone.svg"}),e[13]||(e[13]=n("span",null,"联系",-1))]),_:1})]),default:g(()=>[e[14]||(e[14]=n("div",{class:"blur"},[n("img",{class:"linkButtonImage",src:"./image/link/setting.png",title:"设置",style:{padding:"4px"}})],-1))]),_:1})])]),n("div",ee,[n("div",{class:"listRow",onClick:e[1]||(e[1]=s=>o.goToPage("sklist"))},e[17]||(e[17]=[n("div",null,[n("p",{class:"textFonte"},"简介")],-1),n("div",null,[n("p",{class:"subTextFont"},"喜欢研究 UI 的独立开发者"),n("img",{src:"./image/SF-Symbol/chevron.forward.png"})],-1)])),e[19]||(e[19]=n("hr",{class:"listHr"},null,-1)),n("div",{class:"listRow",onClick:e[2]||(e[2]=s=>o.goToPage("sklist"))},e[18]||(e[18]=[n("div",null,[n("p",{class:"textFonte"},"经历")],-1),n("div",null,[n("p",{class:"subTextFont"},"iOS 开发、前端开发、UI 设计 等"),n("img",{src:"./image/SF-Symbol/chevron.forward.png"})],-1)])),n("div",te,[n("div",ne,[(u(!0),v(y,null,k(o.getSkIconList,s=>(u(),v("div",null,[n("img",{src:`./image/skill/${s.image}`,class:"skillImage",width:s.size,style:h(`margin-right: ${s.marginRight}px;`)},null,12,se)]))),256))],512)],512)]),n("nav",oe,[n("div",null,[n("span",{id:"all",onClick:e[3]||(e[3]=s=>o.setFilterType("all"))},"全部"),n("span",{id:"project",onClick:e[4]||(e[4]=s=>o.setFilterType("project"))},"项目"),n("span",{id:"video",onClick:e[5]||(e[5]=s=>o.setFilterType("video"))},"视频"),n("span",{id:"essay",onClick:e[6]||(e[6]=s=>o.setFilterType("essay"))},"文章")])]),n("div",le,[(u(!0),v(y,null,k(o.filteredList,s=>(u(),v("div",{key:s.path},[c(m,{item:s,class:"blur",onClick:p=>o.goToPage(s.view==="set"?"sublist":"content",s.path)},null,8,["item","onClick"])]))),128))])])],512)}const ce=S(q,[["render",ie],["__scopeId","data-v-ff5f2879"]]);export{ce as default};
