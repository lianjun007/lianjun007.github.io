import{_ as E,r as f,o as x,n as D,a as B,b as a,c as d,d as $,e,f as y,w as L,g as h,T as A,h as T,i as _,t as m,F as w,j as k,k as b}from"./index-B2Xsg-ZU.js";const P={name:"DropdownMenu",setup(){const n=f(!1),t=f(null),r=()=>{n.value=!0;const o=t.value.parentNode;o&&o.classList.contains("dropDownList")?t.value.classList.add("subSelectBackground"):t.value.classList.add("selectBackground"),D(()=>{const l=t.value.querySelector(".menuContainer .dropDownList");l&&c(l)})},s=o=>{t.value.contains(o.target)||(n.value=!1,t.value.classList.remove("selectBackground","subSelectBackground"))},c=o=>{const l=Array.from(o.children);for(let u=l.length-1;u>0;u--){const g=l[u],i=l[u-1];if(g.tagName==="DIV"&&i.tagName==="DIV"){const p=document.createElement("hr");p.className="menuHr",o.insertBefore(p,g)}}};return x(()=>{D(()=>{document.addEventListener("click",s)})}),B(()=>{document.removeEventListener("click",s)}),{isOpen:n,openDropdown:r,dropdownRef:t}}},j={class:"menuContainer"},H={key:0,class:"dropDownList"};function q(n,t,r,s,c,o){return a(),d("div",{ref:"dropdownRef",onClick:t[0]||(t[0]=(...l)=>s.openDropdown&&s.openDropdown(...l))},[$(n.$slots,"default",{},void 0),e("div",j,[y(A,{name:"fade"},{default:L(()=>[s.isOpen?(a(),d("div",H,[$(n.$slots,"menuList",{},void 0,!0)])):h("",!0)]),_:3})])],512)}const z=E(P,[["render",q],["__scopeId","data-v-7465d12f"]]),O={name:"SvgIcon",props:{src:{type:String,required:!0},color:{type:String,default:"var(--themeColor)"}},data(){return{svgContent:""}},watch:{src:"loadSvg",color:"updateSvgColor"},mounted(){this.loadSvg()},methods:{async loadSvg(){try{const n=await fetch(this.src);if(!n.ok)throw new Error(`Failed to fetch SVG: ${n.statusText}`);const t=await n.text();this.svgContent=t,this.updateSvgColor()}catch(n){console.error("Failed to load SVG:",n),this.svgContent="<svg><text x='10' y='20'>SVG Error</text></svg>"}},updateSvgColor(){if(!this.svgContent)return;const r=new DOMParser().parseFromString(this.svgContent,"image/svg+xml").querySelector("svg");r&&(r.querySelectorAll("[fill]").forEach(s=>{s.setAttribute("fill",this.color)}),r.querySelectorAll("[stroke]").forEach(s=>{s.setAttribute("stroke",this.color)}),this.svgContent=r.outerHTML)}}},N=["innerHTML"];function G(n,t,r,s,c,o){return a(),d("div",{innerHTML:c.svgContent,class:"svgIcon"},null,8,N)}const J=E(O,[["render",G]]),U={name:"CardView",props:{infoArray:{type:Object,required:!0}},setup(n){const t=f(n.infoArray),r=f(null),s=f(0),c=f(0),o=f(0),l=f(!0);let u;const g=()=>{if(r.value){const v=r.value.getBoundingClientRect().width;s.value=v/7>30?v/7:20,c.value=v/3,o.value=v/13>20?v/13:20;const C=300;l.value=v>=C}},i=f(null),p=()=>{if(!i.value)return;const v=i.value,C=v.scrollLeft,I=v.scrollWidth-v.clientWidth,V=20,W=C<=0,F=C>=I,M=W?0:V,R=F?100:100-V;v.style.mask=`
            linear-gradient(
                90deg,
                transparent 0,
                #fff ${M}%,
                #fff ${R}%,
                transparent 100%
            )
            `},S=()=>{if(!i.value)return;let v;const C=i.value,I=()=>{window.cancelAnimationFrame(v),v=window.requestAnimationFrame(p)};return C.addEventListener("scroll",I),setTimeout(()=>{p()},500),()=>{C.removeEventListener("scroll",I)}};return x(()=>{r.value&&(g(),u=new ResizeObserver(g),u.observe(r.value));const v=S();B(()=>{v&&v()})}),B(()=>{u&&u.disconnect()}),{cardViewContent:t,moduleRef:r,modulePadding:s,imageSize:c,fontSize:o,isShowInfo:l,tagContainerRef:i}}},X=["src","width"],K={class:"dateText"},Q={class:"tagContainer",ref:"tagContainerRef"},Y={class:"tag"},Z={key:0,class:"info"},ee=["src"],te={class:"title"},ne={class:"dateText"},se={class:"tagContainer",ref:"tagContainerRef"},oe={class:"tag"},ie={class:"info"},le=["src"],re={class:"title"},ae={class:"dateText"},de={class:"tagContainer",ref:"tagContainerRef"},ce={class:"tag"},ue={class:"info"},ve=["src"],me={class:"tag"};function ge(n,t,r,s,c,o){return a(),d("div",null,[s.cardViewContent.view==="module"?(a(),d("div",{key:0,class:T(s.cardViewContent.view),ref:"moduleRef",style:_(`padding: ${s.modulePadding}px;`)},[e("div",null,[s.cardViewContent.image?(a(),d("img",{key:0,src:`./image/${s.cardViewContent.image}`,width:s.imageSize},null,8,X)):h("",!0),e("div",null,[e("p",{class:"title",style:_(`font-size: ${s.fontSize}px;`)},m(s.cardViewContent.title),5),e("p",K,m(s.cardViewContent.createDate),1)])]),e("div",Q,[(a(!0),d(w,null,k(s.cardViewContent.tag,l=>(a(),d("div",{key:l},[e("div",Y,m(l),1)]))),128))],512),s.isShowInfo?(a(),d("p",Z,m(s.cardViewContent.info),1)):h("",!0)],6)):h("",!0),s.cardViewContent.view==="set"?(a(),d("div",{key:1,class:T(s.cardViewContent.view)},[e("div",null,[s.cardViewContent.image?(a(),d("img",{key:0,src:`./image/${s.cardViewContent.image}`},null,8,ee)):h("",!0),e("div",null,[e("p",te,m(s.cardViewContent.title),1),e("p",ne,m(s.cardViewContent.createDate),1),e("div",se,[(a(!0),d(w,null,k(s.cardViewContent.tag,l=>(a(),d("div",{key:l},[e("div",oe,m(l),1)]))),128))],512)])]),e("p",ie,m(s.cardViewContent.info),1)],2)):h("",!0),s.cardViewContent.view==="cover"?(a(),d("div",{key:2,class:T(s.cardViewContent.view)},[s.cardViewContent.image?(a(),d("img",{key:0,src:`./image/${s.cardViewContent.image}`},null,8,le)):h("",!0),e("div",null,[e("div",null,[e("div",null,[e("p",re,m(s.cardViewContent.title),1),e("p",ae,m(s.cardViewContent.createDate),1)])]),e("div",de,[(a(!0),d(w,null,k(s.cardViewContent.tag,l=>(a(),d("div",null,[e("div",ce,m(l),1)]))),256))],512),e("p",ue,m(s.cardViewContent.info),1)])],2)):h("",!0),s.cardViewContent.view==="essay"?(a(),d("div",{key:3,class:T(s.cardViewContent.view)},[e("div",null,[s.cardViewContent.image?(a(),d("img",{key:0,src:`./image/${s.cardViewContent.image}`},null,8,ve)):h("",!0),e("div",null,[e("p",null,m(s.cardViewContent.title),1),e("p",null,m(s.cardViewContent.createDate),1)])]),e("div",null,[(a(!0),d(w,null,k(s.cardViewContent.tag,l=>(a(),d("div",null,[e("div",me,m(l),1)]))),256))]),e("p",null,m(s.cardViewContent.info),1)],2)):h("",!0)])}const fe=E(U,[["render",ge],["__scopeId","data-v-92f4c58c"]]);function he(n,t){n>t?(document.getElementById("navTop").classList.add("navBackground","navBackgroundDivider"),document.getElementById("navTitle").classList.add("navShow"),document.getElementById("navTitle").classList.remove("navHidden"),document.querySelector(".contentBackground").classList.add("backgroundBlur"),document.querySelectorAll(".blur").forEach(r=>{r.classList.remove("blur"),r.classList.add("unblur")})):(document.getElementById("navTop").classList.remove("navBackground","navBackgroundDivider"),document.getElementById("navTitle").classList.remove("navShow"),document.getElementById("navTitle").classList.add("navHidden"),document.querySelector(".contentBackground").classList.remove("backgroundBlur"),document.querySelectorAll(".unblur").forEach(r=>{r.classList.add("blur"),r.classList.remove("unblur")})),n>t+80?(document.getElementById("navLeft").classList.remove("navHidden"),document.getElementById("navLeft").classList.add("navShow"),document.getElementById("navRight").classList.remove("navHidden"),document.getElementById("navRight").classList.add("navShow")):(document.getElementById("navLeft").classList.remove("navShow"),document.getElementById("navLeft").classList.add("navHidden"),document.getElementById("navRight").classList.remove("navShow"),document.getElementById("navRight").classList.add("navHidden")),n>t+250?(document.querySelector(".navBar").classList.add("navBarTop","navBackgroundDivider"),document.getElementById("navTop").classList.remove("navBackgroundDivider"),document.documentElement.style.setProperty("--contentBackgroundTop","88px")):(document.querySelector(".navBar").classList.remove("navBarTop","navBackgroundDivider"),document.documentElement.style.setProperty("--contentBackgroundTop","44px"),n>t&&document.getElementById("navTop").classList.add("navBackgroundDivider"))}const pe={components:{Dropdown:z,SvgIcon:J,CardView:fe},data(){return{intervalId:null,intervalCount:0,myInfoList:[],linkList:[],skIconList:[],filterType:"all",lastWidth:0}},setup(){const n=f(null),t=f(325);function r(){he(n.value.scrollTop,t.value)}const s=f(!1),c=f(null),o=f(null);let l=0,u=.2;function g(){if(o.value){l-=u;const S=o.value.offsetWidth;Math.abs(l)>=S/2&&(l=0),o.value.style.transform=`translateX(${l}px)`,requestAnimationFrame(g)}}const i=()=>{u=0},p=()=>{u=.2};return x(()=>{n.value&&n.value.addEventListener("scroll",r),o.value&&g(),o.value&&(o.value.addEventListener("mouseenter",i),o.value.addEventListener("mouseleave",p))}),B(()=>{n.value&&n.value.removeEventListener("scroll",r)}),{isScrolled:s,scrollView:n,skillScollRow:c,skillScollContainer:o,skillScollRow:c,skillScollContainer:o,showNavTopPara:t}},mounted(){this.$route.path==="/"?(this.showNavTopPara=325,document.documentElement.style.setProperty("--profilePhotoModuleMarginTop","200px")):(this.showNavTopPara=145,document.documentElement.style.setProperty("--profilePhotoModuleMarginTop","20px")),this.fetchData(),this.fetchContentData(),this.resizeObserver=new ResizeObserver(t=>{window.requestAnimationFrame(()=>{this.onResize()})});const n=document.getElementById("waterfall");n?this.resizeObserver.observe(n):console.error("未找到 #waterfall 容器元素"),this.startWaterfallInterval()},computed:{filteredList(){return this.filterType==="all"?this.myInfoList:this.myInfoList.filter(n=>n.type===this.filterType)},getlinkList(){return this.linkList},getSkIconList(){return this.skIconList}},beforeDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()},watch:{filterType(){this.$nextTick(()=>{this.arrangeWaterfall(),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},50)})},$route(n,t){n.path==="/"?(this.showNavTopPara=325,document.documentElement.style.setProperty("--profilePhotoModuleMarginTop","200px")):(this.showNavTopPara=145,document.documentElement.style.setProperty("--profilePhotoModuleMarginTop","20px"))}},methods:{openLink(n){n.startsWith("mailto:")?location.assign(n):window.open(n,"_blank")},goToPage(n,t,r){const s=this.$route.name;s!==n?t&&r?this.$router.push({name:n,query:{path:t,title:r}}):this.$router.push({name:n}):this.$router.push({name:s,query:{path:t,title:r}})},setFilterType(n){this.filterType=n,this.$nextTick(()=>{this.arrangeWaterfall()})},fetchContentData(){fetch("./json/index.json").then(n=>n.json()).then(n=>{Object.keys(n).forEach(r=>{this.myInfoList.push(...n[r].slice(1).map(s=>({...s,type:n[r][0]})))})})},fetchData(){fetch("./json/link.json").then(n=>n.json()).then(n=>{this.linkList=n}),fetch("./json/skIcon.json").then(n=>n.json()).then(n=>{this.skIconList=n})},arrangeWaterfall(){console.log("重新布局"),document.getElementById("all").style.color="black",document.getElementById("project").style.color="black",document.getElementById("video").style.color="black",document.getElementById("essay").style.color="black",document.getElementById(this.filterType).style.color="#3A6A5E";const n=document.getElementById("waterfall"),t=Array.from(n.children),r=n.offsetWidth,s=r<240?1:Math.min(Math.floor(r/220),4),c=new Array(s).fill(0),o=(r-(s-1)*10)/s;t.forEach(l=>{const u=l.offsetHeight,g=c.indexOf(Math.min(...c));l.style.width=`${o}px`,l.style.top=`${c[g]+10}px`,l.style.left=`${g*o+g*10}px`,c[g]+=u+10}),n.style.height=`${Math.max(...c)}px`},startWaterfallInterval(){this.intervalId=setInterval(()=>{this.intervalCount++,this.intervalCount<=30&&this.arrangeWaterfall()},300)},stopWaterfallInterval(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},onResize(){const n=document.getElementById("waterfall");if(!n)return;const t=n.offsetWidth;t!==this.lastWidth&&(this.arrangeWaterfall(),this.lastWidth=t,this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},350))},beforeDestroy(){this.observer&&this.observer.disconnect(),this.stopWaterfallInterval()}}},ye={ref:"scrollView"},we={id:"navTop"},ke=["onClick"],Ce=["src","title"],_e={class:"contentView"},Le={class:"profilePhotoModule"},Se={class:"linkAndSetting"},Ie={class:"blur"},Te=["href"],Be=["src","title"],Ee={class:"list blur"},be={class:"skillScollRow",ref:"skillScollRow",style:{overflow:"hidden"}},xe={class:"scrollView",ref:"skillScollContainer",style:{display:"flex",gap:"5px","align-items":"center",padding:"0 16px"}},Ve=["src","width"],De={class:"navBar"},$e={id:"waterfall",class:"cardModule"};function We(n,t,r,s,c,o){const l=b("SvgIcon"),u=b("Dropdown"),g=b("CardView");return a(),d("div",ye,[e("nav",we,[e("div",{id:"navLeft",class:"navHidden",onClick:t[0]||(t[0]=i=>o.goToPage("lianjun"))},[y(l,{src:"./image/SF-Symbol/house.svg"}),t[7]||(t[7]=e("span",null,"主页",-1))]),t[11]||(t[11]=e("div",{id:"navTitle",class:"navHidden"},[e("img",{src:"./image/lianjun.png"}),e("span",null,"LianJun")],-1)),y(u,{id:"navRight",class:"navHidden"},{menuList:L(()=>[e("div",null,[y(l,{src:"./image/SF-Symbol/gearshape.svg"}),t[8]||(t[8]=e("span",null,"设置",-1))]),y(u,null,{menuList:L(()=>[(a(!0),d(w,null,k(o.getlinkList,i=>(a(),d("div",{onClick:p=>o.openLink(i.link)},[e("img",{src:`./image/link/${i.image}`,title:i.name,style:_(`width: 23px; height: 23px; padding: ${i.padding}px;`)},null,12,Ce),e("div",null,[e("span",{style:_(`color: ${i.color};`)},m(i.name),5),y(l,{src:"./image/SF-Symbol/link.svg",color:i.color},null,8,["color"])])],8,ke))),256))]),default:L(()=>[y(l,{src:"./image/SF-Symbol/phone.svg"}),t[9]||(t[9]=e("span",null,"联系",-1))]),_:1})]),default:L(()=>[y(l,{src:"./image/SF-Symbol/list.bullet.svg"}),t[10]||(t[10]=e("span",null,"菜单",-1))]),_:1})]),e("div",_e,[t[18]||(t[18]=e("div",{class:"contentBackground"},null,-1)),e("div",Le,[t[14]||(t[14]=e("div",null,[e("img",{src:"./image/lianjun.png"}),e("p",null,"LianJun")],-1)),e("div",Se,[(a(!0),d(w,null,k(o.getlinkList,i=>(a(),d("div",Ie,[e("a",{href:i.link,target:"_blank"},[e("img",{src:`./image/link/${i.image}`,title:i.name,style:_(`padding: ${i.padding}px;`)},null,12,Be)],8,Te)]))),256)),t[12]||(t[12]=e("div",{class:"divider blur"},null,-1)),t[13]||(t[13]=e("div",{class:"blur"},[e("img",{class:"linkButtonImage",src:"./image/link/setting.png",title:"设置",style:{padding:"4px"}})],-1))])]),e("div",Ee,[e("div",{class:"listRow",onClick:t[1]||(t[1]=i=>o.goToPage("sklist"))},t[15]||(t[15]=[e("div",null,[e("p",{class:"textFonte"},"简介")],-1),e("div",null,[e("p",{class:"subTextFont"},"喜欢研究 UI 的独立开发者"),e("img",{src:"./image/SF-Symbol/chevron.forward.png"})],-1)])),t[17]||(t[17]=e("hr",{class:"listHr"},null,-1)),e("div",{class:"listRow",onClick:t[2]||(t[2]=i=>o.goToPage("sklist"))},t[16]||(t[16]=[e("div",null,[e("p",{class:"textFonte"},"经历")],-1),e("div",null,[e("p",{class:"subTextFont"},"iOS 开发、前端开发、UI 设计 等"),e("img",{src:"./image/SF-Symbol/chevron.forward.png"})],-1)])),e("div",be,[e("div",xe,[(a(!0),d(w,null,k(o.getSkIconList,i=>(a(),d("div",null,[e("img",{src:`./image/skill/${i.image}`,class:"skillImage",width:i.size,style:_(`margin-right: ${i.marginRight}px;`)},null,12,Ve)]))),256))],512)],512)]),e("nav",De,[e("div",null,[e("span",{id:"all",onClick:t[3]||(t[3]=i=>o.setFilterType("all"))},"全部"),e("span",{id:"project",onClick:t[4]||(t[4]=i=>o.setFilterType("project"))},"项目"),e("span",{id:"video",onClick:t[5]||(t[5]=i=>o.setFilterType("video"))},"视频"),e("span",{id:"essay",onClick:t[6]||(t[6]=i=>o.setFilterType("essay"))},"文章")])]),e("div",$e,[(a(!0),d(w,null,k(o.filteredList,i=>(a(),d("div",{key:i.title},[y(g,{"info-array":i,class:"blur",onClick:p=>o.goToPage(i.view==="set"?"subList":"content",i.type,i.title)},null,8,["info-array","onClick"])]))),128))])])],512)}const Me=E(pe,[["render",We],["__scopeId","data-v-c9536dd4"]]);export{Me as default};
