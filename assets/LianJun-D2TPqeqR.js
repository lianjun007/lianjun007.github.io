import{_ as ue,r,c as A,o as ce,a as de,b as s,d as i,e as l,f as o,w as h,n as B,g as j,F as _,h as F,t as Y,i as ne,j as ve,k as le,l as ae,s as se,m as te,u as pe,p as oe,q as ge}from"./index-fZg3IRHp.js";import{I as fe,_ as ie,M as q,L as me,a as re}from"./ListView-CJSOQum5.js";import{_ as f}from"./SvgIcon-s4K2pPYI.js";import{W as ye,C as he}from"./CardView-BWIFP4aE.js";import"./function-aY7JZtoC.js";const ke={key:0,class:"buttonDivider"},we=["onClick"],Be={__name:"NavBar",props:{options:{type:Array,required:!0},selected:{type:String,default:""},haveSearch:{type:Boolean,default:!0}},emits:["filter-change","sort-change"],setup(O,{emit:N}){const U=O,C=r(!1),y=r(!1),p=r(null),L=r(null),u=r(null),x=r(null),b=r(null),H=r(null),c=r(null),k=r(null),w=r(null),S=N;function J(a){S("filter-change",a)}function W(a){S("sort-change",a)}const G=A(()=>[...U.options.map(({label:a})=>a)]),K=A(()=>[...U.options.map(({value:a})=>a)]);function Z(){const a=p.value.getBoundingClientRect();let g=L.value.getBoundingClientRect().right-a.left;b.value?(p.value.style.height="44px",u.value.style.width="0px",u.value.style.top="22px",u.value.style.left=`${g/2}px`,u.value.style.height="0px",b.value=!1):(u.value.style.top="44px",u.value.style.left="20px",u.value.style.width=`${a.width-40}px`,p.value.style.height="88px",u.value.style.height="32px",b.value=!0)}function P(){const a=p.value.getBoundingClientRect();let g=L.value.getBoundingClientRect().right-a.left;b.value||(u.value.style.top="6px",u.value.style.left=`${g+10}px`,u.value.style.width=`${a.width-g-30}px`,u.value.style.height="32px",x.value=!0)}function ee(){const a=p.value.getBoundingClientRect();let g=L.value.getBoundingClientRect().right-a.left;b.value||(u.value.style.width="0px",u.value.style.left=`${g/2}px`,u.value.style.top="22px",u.value.style.height="0px",x.value=!1)}let V=null;function I(a=!1){if(!p.value||!L.value||!c.value||!H.value)return;const d=p.value.getBoundingClientRect(),g=L.value.getBoundingClientRect();V||(V=c.value.getBoundingClientRect());const M=H.value.getBoundingClientRect();let t=g.right-d.left,n=d.right-M.left,e=d.width-t-n;if(a&&C.value?(e+=60,t-=10,n-=10,d.width+=40):a&&!C.value&&(e-=60,t+=10,n+=10,d.width-=40),Q(e<150,a),y.value){k.value&&(k.value.style.left=`${t+(e-c.value.getBoundingClientRect().width)/4}px`),c.value.style.left=`${t+e/2}px`,w.value&&(w.value.style.right=`${n+(e-c.value.getBoundingClientRect().width)/4}px`);return}V.width<e?(c.value.style.left=`${(d.width-V.width)/2}px`,c.value.style.width=`${V.width}px`):(c.value.style.left=`${t}px`,c.value.style.width=`${e}px`)}function Q(a,d){a!==y.value&&(y.value=a,ve(()=>{I(d)}))}let $=new MutationObserver(()=>{if(p.value){const a=p.value.getBoundingClientRect().top;43.99<=a&&a<=44?z(!0):z(!1)}});function z(a){C.value!==a&&(C.value=a,I(!0))}return ce(()=>{$&&p.value&&$.observe(p.value,{attributes:!0,attributeFilter:["class"]}),c.value&&(setTimeout(()=>{I()},200),window.addEventListener("resize",()=>{I()}))}),de(()=>{$&&$.disconnect()}),(a,d)=>(s(),i("div",{onMouseleave:ee,ref_key:"navBar",ref:p,class:ne(["navBar",{navBarTop:C.value}])},[l("div",{ref_key:"searchButton",ref:L,onClick:Z,onMouseenter:P,class:"searchButton",style:B(`left: ${C.value?"6px":"16px"};`)},[o(fe,{color:"var(--themeColor)",main:"搜索"},{iconLeft:h(()=>[o(f,{size:[20,17],src:"./image/SF-Symbol/magnifyingglass.svg"})]),_:1})],36),y.value?(s(),i("div",{key:0,ref_key:"optionDividerLeft",ref:k,class:"optionDivider"},null,512)):j("",!0),y.value?j("",!0):(s(),i("div",{key:1,ref_key:"optionContainer",ref:c,class:"optionContainer",title:"按 Shift 可横向滚动"},[(s(!0),i(_,null,F(O.options,(g,M)=>(s(),i(_,{key:g.value},[M!==0?(s(),i("div",ke)):j("",!0),l("div",{class:ne(["optionButton",{active:O.selected===g.value}]),onClick:t=>J(g.value)},Y(g.label),11,we)],64))),128))],512)),y.value?(s(),i("div",{key:2,ref_key:"optionContainer",ref:c,class:"optionSelectButton"},[o(ie,{color:"var(--themeColor)",options:G.value,values:K.value,onSelectChange:J},null,8,["options","values"])],512)):j("",!0),y.value?(s(),i("div",{key:3,ref_key:"optionDividerRight",ref:w,class:"optionDivider"},null,512)):j("",!0),l("div",{ref_key:"sortButton",ref:H,class:"sortButton",style:B(`right: ${C.value?"6px":"16px"};`)},[o(ie,{onSelectChange:W,color:"var(--themeColor)",options:["最新发布","最早发布","最新更新","最早更新"]})],4),l("div",{ref_key:"searchInputContainer",ref:u,class:"searchInputContainer"},null,512)],34))}},Se=ue(Be,[["__scopeId","data-v-35b2a311"]]),Ce={id:"navTop"},Le=["onClick"],xe=["src","title"],be=["onClick"],$e=["src","title"],De={class:"contentView"},Re={class:"profilePhotoModule"},_e={class:"linkAndSetting",style:{"z-index":"2"}},Ie={class:"switchBlur blur"},Me=["href"],Ee=["src","title"],Te=["onClick"],Fe=["src","title"],je=["src","width","title"],Pe=["src","width","title"],Ve={__name:"LianJun",setup(O){const N=ge(),U=pe(),C=r([{label:"全部",value:"all"},{label:"项目",value:"project"},{label:"视频",value:"video"},{label:"文章",value:"essay"}]),y=r([]),p=r([]),L=r([]),u=r("all"),x=r(325),b=r(90);function H(t){b.value=t?-90:90}const c=r(null),k=r(null),w=r(null),S=r(null),J=t=>{const n=document.getElementById("navTop"),e=document.getElementById("navTitle"),m=document.getElementById("navLeft"),E=document.getElementById("navRight");t>x.value?(n.classList.add("navBackground","navBackgroundDivider"),e.classList.add("navShow"),e.classList.remove("navHidden"),document.querySelectorAll(".switchBlur").forEach(v=>{v.classList.remove("blur")}),document.querySelector(".contentBackground").classList.add("blur")):(n.classList.remove("navBackground","navBackgroundDivider"),e.classList.remove("navShow"),e.classList.add("navHidden"),document.querySelectorAll(".switchBlur").forEach(v=>{v.classList.add("blur")}),document.querySelector(".contentBackground").classList.remove("blur")),t>x.value+80?(m.classList.remove("navHidden"),m.classList.add("navShow"),E.classList.remove("navHidden"),E.classList.add("navShow")):(m.classList.remove("navShow"),m.classList.add("navHidden"),E.classList.remove("navShow"),E.classList.add("navHidden")),t>x.value+250?(document.querySelector(".navBar").classList.add("navBackgroundDivider"),n.classList.remove("navBackgroundDivider"),document.documentElement.style.setProperty("--contentBackgroundTop","88px")):(document.querySelector(".navBar").classList.remove("navBackgroundDivider"),document.documentElement.style.setProperty("--contentBackgroundTop","44px"),t>x.value&&n.classList.add("navBackgroundDivider"))},W=()=>{c.value&&J(c.value.scrollTop)},G=()=>{w.value&&S.value&&(w.value.style.animationPlayState="paused",S.value.style.animationPlayState="paused")},K=()=>{w.value&&S.value&&(w.value.style.animationPlayState="running",S.value.style.animationPlayState="running")};function Z(t){t==="最新发布"?P("desc","createDate"):t==="最早发布"?P("asc","createDate"):t==="最新更新"?P("desc","updateDate"):t==="最早更新"&&P("asc","updateDate")}const P=async(t="desc",n="createDate")=>{try{const m=await(await fetch("./json/index.json")).json(),E=Object.keys(m);y.value=E.flatMap(v=>m[v].slice(1).map(D=>({...D,type:m[v][0]}))),y.value.sort((v,D)=>{let T,R;return n==="updateDate"?(T=new Date(v.updateDate||v.createDate),R=new Date(D.updateDate||D.createDate)):(T=new Date(v.createDate),R=new Date(D.createDate)),t==="asc"?T-R:R-T}),y.value.forEach(v=>{v.sub&&Array.isArray(v.sub)&&v.sub.sort((D,T)=>{let R,X;return n==="updateDate"?(R=new Date(D.updateDate||D.createDate),X=new Date(T.updateDate||T.createDate)):(R=new Date(D.createDate),X=new Date(T.createDate)),t==="asc"?R-X:X-R})})}catch(e){console.error("Error fetching content data:",e)}},ee=async()=>{try{const[t,n]=await Promise.all([fetch("./json/link.json"),fetch("./json/skIcon.json")]);p.value=await t.json(),L.value=await n.json()}catch(t){console.error("Error fetching data:",t)}},V=A(()=>u.value==="all"?y.value:y.value.filter(t=>t.type===u.value)),I=r(le(ae("controlColor"))),Q=new MutationObserver(()=>{I.value=le(ae("controlColor"))}),$=A(()=>p.value.map(t=>{const{lightImage:n,darkImage:e,darkPadding:m,lightPadding:E,...v}=t;return{...v,image:I.value==="dark"?e:n,padding:I.value==="dark"?m:E}})),z=A(()=>L.value),a=t=>{t.startsWith("mailto:")?location.assign(t):window.open(t,"_blank")};function d(t,n,e){n?N.push({name:t,query:{path:n,title:e}}):N.push({name:t})}const g=t=>{u.value=t};function M(){let t=window.innerHeight*.5-220;t<20?t=20:t>300&&(t=300),se("profilePhotoModuleMarginTop",t+"px")}return ce(()=>{if(Q.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}),c.value&&c.value.addEventListener("scroll",W),k.value&&(k.value.addEventListener("mouseenter",G),k.value.addEventListener("mouseleave",K)),setTimeout(()=>{w.value.style.animationPlayState="paused",S.value.style.animationPlayState="paused",setTimeout(()=>{w.value.style.animationPlayState="running",S.value.style.animationPlayState="running"},1e3)},100),U.path==="/"){let t=window.innerHeight*.5-220;t<20?t=20:t>300&&(t=300),x.value=t+147,M(),window.addEventListener("resize",M)}else x.value=145,se("profilePhotoModuleMarginTop","20px"),window.removeEventListener("resize",M);ee(),P()}),de(()=>{window.removeEventListener("resize",M),Q.disconnect(),c.value&&c.value.removeEventListener("scroll",W),k.value&&(k.value.removeEventListener("mouseenter",G),k.value.removeEventListener("mouseleave",K))}),(t,n)=>(s(),i("div",{ref_key:"scrollView",ref:c},[l("nav",Ce,[t.$route.name!=="lianjun"?(s(),i("div",{key:0,id:"navLeft",class:"navHidden",onClick:n[0]||(n[0]=e=>d("lianjun"))},[o(f,{src:"./image/SF-Symbol/house.svg"}),n[5]||(n[5]=l("span",null,"主页",-1))])):j("",!0),t.$route.name==="lianjun"?(s(),te(q,{key:1,id:"navLeft",class:"navHidden",position:[20,0,0,-60]},{menuList:h(()=>[(s(!0),i(_,null,F($.value,e=>(s(),i("div",{onClick:m=>a(e.link),key:e.id},[l("div",null,[l("img",{src:`./image/link/${e.image}`,title:e.name,style:B(`width: 23px; height: 23px; padding: ${e.padding}px;`)},null,12,xe),l("span",{style:B(`color: ${e.color};`)},Y(e.name),5)]),o(f,{src:"./image/SF-Symbol/link.svg",color:e.color},null,8,["color"])],8,Le))),128))]),default:h(()=>[o(f,{src:"./image/SF-Symbol/phone.svg"}),n[6]||(n[6]=l("span",null,"联系",-1))]),_:1})):j("",!0),n[10]||(n[10]=l("div",{id:"navTitle",class:"navHidden"},[l("img",{src:"./image/lianjun.png"}),l("span",null,"LianJun")],-1)),o(q,{id:"navRight",class:"navHidden"},{menuList:h(()=>[l("div",{onClick:n[1]||(n[1]=oe(e=>d("setting"),["stop"]))},[l("div",null,[o(f,{src:"./image/SF-Symbol/gearshape.svg"}),n[7]||(n[7]=l("span",null,"设置",-1))]),o(f,{option:"forward"})]),t.$route.name!=="lianjun"?(s(),te(q,{key:0,onIsOpen:H},{menuList:h(()=>[(s(!0),i(_,null,F($.value,e=>(s(),i("div",{onClick:m=>a(e.link),key:e.id},[l("div",null,[l("img",{src:`./image/link/${e.image}`,title:e.name,style:B(`width: 23px; height: 23px; padding: ${e.padding}px;`)},null,12,$e),l("span",{style:B(`color: ${e.color};`)},Y(e.name),5)]),o(f,{src:"./image/SF-Symbol/link.svg",color:e.color},null,8,["color"])],8,be))),128))]),default:h(()=>[l("div",null,[o(f,{src:"./image/SF-Symbol/phone.svg"}),n[8]||(n[8]=l("span",null,"联系",-1))]),o(f,{option:"down",rotate:b.value},null,8,["rotate"])]),_:1})):j("",!0)]),default:h(()=>[o(f,{src:"./image/SF-Symbol/list.bullet.svg"}),n[9]||(n[9]=l("span",null,"功能",-1))]),_:1})]),l("div",De,[n[16]||(n[16]=l("div",{class:"contentBackground"},null,-1)),l("div",Re,[n[15]||(n[15]=l("div",null,[l("img",{src:"./image/lianjun.png"}),l("p",null,"LianJun")],-1)),l("div",_e,[(s(!0),i(_,null,F($.value,e=>(s(),i("div",{key:e.id},[l("div",Ie,[l("a",{href:e.link,target:"_blank"},[l("img",{src:`./image/link/${e.image}`,title:e.name,style:B(`padding: ${e.padding}px;`)},null,12,Ee)],8,Me)])]))),128)),n[14]||(n[14]=l("div",{class:"divider blur"},null,-1)),o(q,{selectRadius:8,position:[10,0,0,-75]},{menuList:h(()=>[l("div",{onClick:n[2]||(n[2]=oe(e=>d("setting"),["stop"]))},[l("div",null,[o(f,{src:"./image/SF-Symbol/gearshape.svg"}),n[11]||(n[11]=l("span",null,"设置",-1))]),o(f,{option:"forward"})]),o(q,{onIsOpen:H},{menuList:h(()=>[(s(!0),i(_,null,F($.value,e=>(s(),i("div",{onClick:m=>a(e.link),key:e.id},[l("div",null,[l("img",{src:`./image/link/${e.image}`,title:e.name,style:B(`width: 23px; height: 23px; padding: ${e.padding}px;`)},null,12,Fe),l("span",{style:B(`color: ${e.color};`)},Y(e.name),5)]),o(f,{src:"./image/SF-Symbol/link.svg",color:e.color},null,8,["color"])],8,Te))),128))]),default:h(()=>[l("div",null,[o(f,{src:"./image/SF-Symbol/phone.svg"}),n[12]||(n[12]=l("span",null,"联系",-1))]),o(f,{option:"down",rotate:b.value},null,8,["rotate"])]),_:1})]),default:h(()=>[n[13]||(n[13]=l("div",{class:"switchBlur blur"},[l("img",{class:"linkButtonImage",src:"./image/link/setting.png",title:"设置",style:{padding:"4px"}})],-1))]),_:1})])]),o(me,null,{default:h(()=>[o(re,{onClick:n[3]||(n[3]=e=>d("sklist")),main:"简介",sub:"喜欢研究 UI 的独立开发者","sub-icon":"subForward"}),o(re,{onClick:n[4]||(n[4]=e=>d("sklist")),main:"经历",sub:"iOS 开发、前端开发、UI 设计 等","sub-icon":"subForward"}),l("div",{class:"skillScrollRow",ref_key:"skillScrollRow",ref:k},[l("div",{class:"scrollView",ref_key:"skillScrollSubRow1",ref:w},[(s(!0),i(_,null,F(z.value,e=>(s(),i("div",{key:e.id},[l("img",{src:`./image/skill/${e.image}`,class:"skillImage",width:e.size,style:B(`margin-right: ${e.marginRight}px; border-radius: ${e.radius}px;`),title:e.info},null,12,je)]))),128))],512),l("div",{class:"scrollView",ref_key:"skillScrollSubRow2",ref:S},[(s(!0),i(_,null,F(z.value,e=>(s(),i("div",{key:e.id},[l("img",{src:`./image/skill/${e.image}`,class:"skillImage",width:e.size,style:B(`margin-right: ${e.marginRight}px; border-radius: ${e.radius}px;`),title:e.info},null,12,Pe)]))),128))],512)],512)]),_:1}),o(Se,{class:"blur",options:C.value,selected:u.value,onFilterChange:g,onSortChange:Z,style:{"z-index":"1"}},null,8,["options","selected"]),o(ye,{columnCount:4},{default:h(()=>[(s(!0),i(_,null,F(V.value,e=>(s(),i("div",{key:e.path},[(s(),te(he,{item:e,class:"switchBlur blur",onClick:m=>d(e.sub?"sublist":"content",e.path,e.title),key:e.path},null,8,["item","onClick"]))]))),128))]),_:1})])],512))}},Ne=ue(Ve,[["__scopeId","data-v-58c2a4ad"]]);export{Ne as default};
