import{_ as ue,r,c as O,o as ce,a as de,b as s,d as i,e as l,f as o,w as h,n as B,g as j,F as _,h as F,t as Y,i as ne,j as ve,k as le,l as ae,s as se,m as te,u as pe,p as oe,q as ge}from"./index-CP_43Idu.js";import{I as fe,_ as ie,M as A,L as me,a as re}from"./ListView-C_0vU8fZ.js";import{_ as f}from"./SvgIcon-B9brAuFv.js";import{W as ye,C as he}from"./CardView-6vLC1Asx.js";import"./function-aY7JZtoC.js";const ke={key:0,class:"buttonDivider"},we=["onClick"],Be={__name:"NavBar",props:{options:{type:Array,required:!0},selected:{type:String,default:""},haveSearch:{type:Boolean,default:!0}},emits:["filter-change","sort-change"],setup(N,{emit:U}){const H=N,C=r(!1),y=r(!1),p=r(null),L=r(null),u=r(null),b=r(null),x=r(null),z=r(null),c=r(null),k=r(null),w=r(null),S=U;function J(a){S("filter-change",a)}function W(a){S("sort-change",a)}const G=O(()=>[...H.options.map(({label:a})=>a)]),K=O(()=>[...H.options.map(({value:a})=>a)]);function Z(){const a=p.value.getBoundingClientRect();let g=L.value.getBoundingClientRect().right-a.left;x.value?(p.value.style.height="44px",u.value.style.width="0px",u.value.style.top="22px",u.value.style.left=`${g/2}px`,u.value.style.height="0px",x.value=!1):(u.value.style.top="44px",u.value.style.left="20px",u.value.style.width=`${a.width-40}px`,p.value.style.height="88px",u.value.style.height="32px",x.value=!0)}function P(){const a=p.value.getBoundingClientRect();let g=L.value.getBoundingClientRect().right-a.left;x.value||(u.value.style.top="6px",u.value.style.left=`${g+10}px`,u.value.style.width=`${a.width-g-30}px`,u.value.style.height="32px",b.value=!0)}function ee(){const a=p.value.getBoundingClientRect();let g=L.value.getBoundingClientRect().right-a.left;x.value||(u.value.style.width="0px",u.value.style.left=`${g/2}px`,u.value.style.top="22px",u.value.style.height="0px",b.value=!1)}let V=null;function I(a=!1){if(!p.value||!L.value||!c.value||!z.value)return;const d=p.value.getBoundingClientRect(),g=L.value.getBoundingClientRect();V||(V=c.value.getBoundingClientRect());const M=z.value.getBoundingClientRect();let n=g.right-d.left,t=d.right-M.left,e=d.width-n-t;if(a&&C.value?(e+=60,n-=10,t-=10,d.width+=40):a&&!C.value&&(e-=60,n+=10,t+=10,d.width-=40),Q(e<150,a),y.value){k.value&&(k.value.style.left=`${n+(e-c.value.getBoundingClientRect().width)/4}px`),c.value.style.left=`${n+e/2}px`,w.value&&(w.value.style.right=`${t+(e-c.value.getBoundingClientRect().width)/4}px`);return}V.width<e?(c.value.style.left=`${(d.width-V.width)/2}px`,c.value.style.width=`${V.width}px`):(c.value.style.left=`${n}px`,c.value.style.width=`${e}px`)}function Q(a,d){a!==y.value&&(y.value=a,ve(()=>{I(d)}))}let $=new MutationObserver(()=>{if(p.value){const a=p.value.getBoundingClientRect().top;43.99<=a&&a<=44?q(!0):q(!1)}});function q(a){C.value!==a&&(C.value=a,I(!0))}return ce(()=>{$&&p.value&&$.observe(p.value,{attributes:!0,attributeFilter:["class"]}),c.value&&(setTimeout(()=>{I()},200),window.addEventListener("resize",()=>{I()}))}),de(()=>{$&&$.disconnect()}),(a,d)=>(s(),i("div",{onMouseleave:ee,ref_key:"navBar",ref:p,class:ne(["navBar",{navBarTop:C.value}])},[l("div",{ref_key:"searchButton",ref:L,onClick:Z,onMouseenter:P,class:"searchButton",style:B(`left: ${C.value?"6px":"16px"};`)},[o(fe,{color:"var(--themeColor)",main:"搜索"},{iconLeft:h(()=>[o(f,{size:[20,17],src:"./image/SF-Symbol/magnifyingglass.svg"})]),_:1})],36),y.value?(s(),i("div",{key:0,ref_key:"optionDividerLeft",ref:k,class:"optionDivider"},null,512)):j("",!0),y.value?j("",!0):(s(),i("div",{key:1,ref_key:"optionContainer",ref:c,class:"optionContainer",title:"按 Shift 可横向滚动"},[(s(!0),i(_,null,F(N.options,(g,M)=>(s(),i(_,{key:g.value},[M!==0?(s(),i("div",ke)):j("",!0),l("div",{class:ne(["optionButton",{active:N.selected===g.value}]),onClick:n=>J(g.value)},Y(g.label),11,we)],64))),128))],512)),y.value?(s(),i("div",{key:2,ref_key:"optionContainer",ref:c,class:"optionSelectButton"},[o(ie,{color:"var(--themeColor)",options:G.value,values:K.value,onSelectChange:J},null,8,["options","values"])],512)):j("",!0),y.value?(s(),i("div",{key:3,ref_key:"optionDividerRight",ref:w,class:"optionDivider"},null,512)):j("",!0),l("div",{ref_key:"sortButton",ref:z,class:"sortButton",style:B(`right: ${C.value?"6px":"16px"};`)},[o(ie,{onSelectChange:W,color:"var(--themeColor)",options:["最新发布","最早发布","最新更新","最早更新"]})],4),l("div",{ref_key:"searchInputContainer",ref:u,class:"searchInputContainer"},null,512)],34))}},Se=ue(Be,[["__scopeId","data-v-35b2a311"]]),Ce={id:"navTop"},Le=["onClick"],be=["src","title"],xe=["onClick"],$e=["src","title"],De={class:"contentView"},Re={class:"profilePhotoModule"},_e={class:"linkAndSetting",style:{"z-index":"2"}},Ie={class:"switchBlur blur"},Me=["href"],Ee=["src","title"],Te=["onClick"],Fe=["src","title"],je=["src","width","title"],Pe=["src","width","title"],Ve={__name:"LianJun",setup(N){const U=ge(),H=pe(),C=r([{label:"全部",value:"all"},{label:"项目",value:"project"},{label:"视频",value:"video"},{label:"文章",value:"essay"}]),y=r([]),p=r([]),L=r([]),u=r("all"),b=r(325),x=r(90);function z(n){x.value=n?-90:90}const c=r(null),k=r(null),w=r(null),S=r(null),J=n=>{const t=document.getElementById("navTop"),e=document.getElementById("navTitle"),m=document.getElementById("navLeft"),E=document.getElementById("navRight");n>b.value?(t.classList.add("navBackground","navBackgroundDivider"),e.classList.add("navShow"),e.classList.remove("navHidden"),document.querySelectorAll(".switchBlur").forEach(v=>{v.classList.remove("blur")}),document.querySelector(".contentBackground").classList.add("blur")):(t.classList.remove("navBackground","navBackgroundDivider"),e.classList.remove("navShow"),e.classList.add("navHidden"),document.querySelectorAll(".switchBlur").forEach(v=>{v.classList.add("blur")}),document.querySelector(".contentBackground").classList.remove("blur")),n>b.value+80?(m.classList.remove("navHidden"),m.classList.add("navShow"),E.classList.remove("navHidden"),E.classList.add("navShow")):(m.classList.remove("navShow"),m.classList.add("navHidden"),E.classList.remove("navShow"),E.classList.add("navHidden")),n>b.value+250?(document.querySelector(".navBar").classList.add("navBackgroundDivider"),t.classList.remove("navBackgroundDivider"),document.documentElement.style.setProperty("--contentBackgroundTop","88px")):(document.querySelector(".navBar").classList.remove("navBackgroundDivider"),document.documentElement.style.setProperty("--contentBackgroundTop","44px"),n>b.value&&t.classList.add("navBackgroundDivider"))},W=()=>{c.value&&J(c.value.scrollTop)},G=()=>{w.value&&S.value&&(w.value.style.animationPlayState="paused",S.value.style.animationPlayState="paused")},K=()=>{w.value&&S.value&&(w.value.style.animationPlayState="running",S.value.style.animationPlayState="running")};function Z(n){n==="最新发布"?P("desc","createDate"):n==="最早发布"?P("asc","createDate"):n==="最新更新"?P("desc","updateDate"):n==="最早更新"&&P("asc","updateDate")}const P=async(n="desc",t="createDate")=>{try{const m=await(await fetch("./json/index.json")).json(),E=Object.keys(m);y.value=E.flatMap(v=>m[v].slice(1).map(D=>({...D,type:m[v][0]}))),y.value.sort((v,D)=>{let T,R;return t==="updateDate"?(T=new Date(v.updateDate||v.createDate),R=new Date(D.updateDate||D.createDate)):(T=new Date(v.createDate),R=new Date(D.createDate)),n==="asc"?T-R:R-T}),y.value.forEach(v=>{v.sub&&Array.isArray(v.sub)&&v.sub.sort((D,T)=>{let R,X;return t==="updateDate"?(R=new Date(D.updateDate||D.createDate),X=new Date(T.updateDate||T.createDate)):(R=new Date(D.createDate),X=new Date(T.createDate)),n==="asc"?R-X:X-R})})}catch(e){console.error("Error fetching content data:",e)}},ee=async()=>{try{const[n,t]=await Promise.all([fetch("./json/link.json"),fetch("./json/skIcon.json")]);p.value=await n.json(),L.value=await t.json()}catch(n){console.error("Error fetching data:",n)}},V=O(()=>u.value==="all"?y.value:y.value.filter(n=>n.type===u.value)),I=r(le(ae("controlColor"))),Q=new MutationObserver(()=>{I.value=le(ae("controlColor"))}),$=O(()=>p.value.map(n=>{const{lightImage:t,darkImage:e,darkPadding:m,lightPadding:E,...v}=n;return{...v,image:I.value==="dark"?e:t,padding:I.value==="dark"?m:E}})),q=O(()=>L.value),a=n=>{n.startsWith("mailto:")?location.assign(n):window.open(n,"_blank")};function d(n,t,e){t?U.push({name:n,query:{path:t,title:e}}):U.push({name:n})}const g=n=>{u.value=n};function M(){let n=window.innerHeight*.5-220;console.log(n),n<20?n=20:n>300&&(n=300),se("profilePhotoModuleMarginTop",n+"px")}return ce(()=>{Q.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}),c.value&&c.value.addEventListener("scroll",W),k.value&&(k.value.addEventListener("mouseenter",G),k.value.addEventListener("mouseleave",K)),setTimeout(()=>{w.value.style.animationPlayState="paused",S.value.style.animationPlayState="paused",setTimeout(()=>{w.value.style.animationPlayState="running",S.value.style.animationPlayState="running"},1e3)},100),console.log(H.path),H.path==="/"?(b.value=325,M(),window.addEventListener("resize",M)):(b.value=145,se("profilePhotoModuleMarginTop","20px"),window.removeEventListener("resize",M)),ee(),P()}),de(()=>{window.removeEventListener("resize",M),Q.disconnect(),c.value&&c.value.removeEventListener("scroll",W),k.value&&(k.value.removeEventListener("mouseenter",G),k.value.removeEventListener("mouseleave",K))}),(n,t)=>(s(),i("div",{ref_key:"scrollView",ref:c},[l("nav",Ce,[n.$route.name!=="lianjun"?(s(),i("div",{key:0,id:"navLeft",class:"navHidden",onClick:t[0]||(t[0]=e=>d("lianjun"))},[o(f,{src:"./image/SF-Symbol/house.svg"}),t[5]||(t[5]=l("span",null,"主页",-1))])):j("",!0),n.$route.name==="lianjun"?(s(),te(A,{key:1,id:"navLeft",class:"navHidden",position:[20,0,0,-60]},{menuList:h(()=>[(s(!0),i(_,null,F($.value,e=>(s(),i("div",{onClick:m=>a(e.link),key:e.id},[l("div",null,[l("img",{src:`./image/link/${e.image}`,title:e.name,style:B(`width: 23px; height: 23px; padding: ${e.padding}px;`)},null,12,be),l("span",{style:B(`color: ${e.color};`)},Y(e.name),5)]),o(f,{src:"./image/SF-Symbol/link.svg",color:e.color},null,8,["color"])],8,Le))),128))]),default:h(()=>[o(f,{src:"./image/SF-Symbol/phone.svg"}),t[6]||(t[6]=l("span",null,"联系",-1))]),_:1})):j("",!0),t[10]||(t[10]=l("div",{id:"navTitle",class:"navHidden"},[l("img",{src:"./image/lianjun.png"}),l("span",null,"LianJun")],-1)),o(A,{id:"navRight",class:"navHidden"},{menuList:h(()=>[l("div",{onClick:t[1]||(t[1]=oe(e=>d("setting"),["stop"]))},[l("div",null,[o(f,{src:"./image/SF-Symbol/gearshape.svg"}),t[7]||(t[7]=l("span",null,"设置",-1))]),o(f,{option:"forward"})]),n.$route.name!=="lianjun"?(s(),te(A,{key:0,onIsOpen:z},{menuList:h(()=>[(s(!0),i(_,null,F($.value,e=>(s(),i("div",{onClick:m=>a(e.link),key:e.id},[l("div",null,[l("img",{src:`./image/link/${e.image}`,title:e.name,style:B(`width: 23px; height: 23px; padding: ${e.padding}px;`)},null,12,$e),l("span",{style:B(`color: ${e.color};`)},Y(e.name),5)]),o(f,{src:"./image/SF-Symbol/link.svg",color:e.color},null,8,["color"])],8,xe))),128))]),default:h(()=>[l("div",null,[o(f,{src:"./image/SF-Symbol/phone.svg"}),t[8]||(t[8]=l("span",null,"联系",-1))]),o(f,{option:"down",rotate:x.value},null,8,["rotate"])]),_:1})):j("",!0)]),default:h(()=>[o(f,{src:"./image/SF-Symbol/list.bullet.svg"}),t[9]||(t[9]=l("span",null,"功能",-1))]),_:1})]),l("div",De,[t[16]||(t[16]=l("div",{class:"contentBackground"},null,-1)),l("div",Re,[t[15]||(t[15]=l("div",null,[l("img",{src:"./image/lianjun.png"}),l("p",null,"LianJun")],-1)),l("div",_e,[(s(!0),i(_,null,F($.value,e=>(s(),i("div",{key:e.id},[l("div",Ie,[l("a",{href:e.link,target:"_blank"},[l("img",{src:`./image/link/${e.image}`,title:e.name,style:B(`padding: ${e.padding}px;`)},null,12,Ee)],8,Me)])]))),128)),t[14]||(t[14]=l("div",{class:"divider blur"},null,-1)),o(A,{selectRadius:8,position:[10,0,0,-75]},{menuList:h(()=>[l("div",{onClick:t[2]||(t[2]=oe(e=>d("setting"),["stop"]))},[l("div",null,[o(f,{src:"./image/SF-Symbol/gearshape.svg"}),t[11]||(t[11]=l("span",null,"设置",-1))]),o(f,{option:"forward"})]),o(A,{onIsOpen:z},{menuList:h(()=>[(s(!0),i(_,null,F($.value,e=>(s(),i("div",{onClick:m=>a(e.link),key:e.id},[l("div",null,[l("img",{src:`./image/link/${e.image}`,title:e.name,style:B(`width: 23px; height: 23px; padding: ${e.padding}px;`)},null,12,Fe),l("span",{style:B(`color: ${e.color};`)},Y(e.name),5)]),o(f,{src:"./image/SF-Symbol/link.svg",color:e.color},null,8,["color"])],8,Te))),128))]),default:h(()=>[l("div",null,[o(f,{src:"./image/SF-Symbol/phone.svg"}),t[12]||(t[12]=l("span",null,"联系",-1))]),o(f,{option:"down",rotate:x.value},null,8,["rotate"])]),_:1})]),default:h(()=>[t[13]||(t[13]=l("div",{class:"switchBlur blur"},[l("img",{class:"linkButtonImage",src:"./image/link/setting.png",title:"设置",style:{padding:"4px"}})],-1))]),_:1})])]),o(me,null,{default:h(()=>[o(re,{onClick:t[3]||(t[3]=e=>d("sklist")),main:"简介",sub:"喜欢研究 UI 的独立开发者","sub-icon":"subForward"}),o(re,{onClick:t[4]||(t[4]=e=>d("sklist")),main:"经历",sub:"iOS 开发、前端开发、UI 设计 等","sub-icon":"subForward"}),l("div",{class:"skillScrollRow",ref_key:"skillScrollRow",ref:k},[l("div",{class:"scrollView",ref_key:"skillScrollSubRow1",ref:w},[(s(!0),i(_,null,F(q.value,e=>(s(),i("div",{key:e.id},[l("img",{src:`./image/skill/${e.image}`,class:"skillImage",width:e.size,style:B(`margin-right: ${e.marginRight}px; border-radius: ${e.radius}px;`),title:e.info},null,12,je)]))),128))],512),l("div",{class:"scrollView",ref_key:"skillScrollSubRow2",ref:S},[(s(!0),i(_,null,F(q.value,e=>(s(),i("div",{key:e.id},[l("img",{src:`./image/skill/${e.image}`,class:"skillImage",width:e.size,style:B(`margin-right: ${e.marginRight}px; border-radius: ${e.radius}px;`),title:e.info},null,12,Pe)]))),128))],512)],512)]),_:1}),o(Se,{class:"blur",options:C.value,selected:u.value,onFilterChange:g,onSortChange:Z,style:{"z-index":"1"}},null,8,["options","selected"]),o(ye,{columnCount:4},{default:h(()=>[(s(!0),i(_,null,F(V.value,e=>(s(),i("div",{key:e.path},[(s(),te(he,{item:e,class:"switchBlur blur",onClick:m=>d(e.sub?"sublist":"content",e.path,e.title),key:e.path},null,8,["item","onClick"]))]))),128))]),_:1})])],512))}},Ne=ue(Ve,[["__scopeId","data-v-4930fc42"]]);export{Ne as default};
