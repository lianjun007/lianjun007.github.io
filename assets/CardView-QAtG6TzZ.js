import{a as x,g as A}from"./function-aY7JZtoC.js";import{_ as B,r as d,l as L,o as V,a as D,b as t,c as i,m as g,j as b,e as n,g as s,t as a,F as h,h as u}from"./index-BYlDqPR4.js";const I={name:"CardView",props:{item:{type:Object,required:!0}},setup(y){const S=d(y.item),m=d(null),e=d(0),w=d(0),k=d(0),r=d(!0);let f;const T=()=>{if(m.value){const o=m.value.getBoundingClientRect().width;e.value=o/7>30?o/7:20,w.value=Math.min(o/3,120),k.value=Math.min(o/13>20?o/13:20,30);const l=300;r.value=o>=l}};fetch("./json/tagTheme.json").then(o=>o.json()).then(o=>{Array.from(document.getElementsByClassName("tag")).forEach(l=>{const c=l.textContent.trim(),v=getComputedStyle(l).getPropertyValue("--subThemeColor");o[c]?(l.style.backgroundColor=o[c],l.style.color=x(o[c])):(l.style.backgroundColor=v,l.style.color=x(v))})});const z=L(()=>A(y.item.path)),_=d(null),C=()=>{if(!_.value)return;const o=_.value,l=o.scrollLeft,c=o.scrollWidth-o.clientWidth,v=20,R=l<=0,E=l>=c,F=R?0:v,j=E?100:100-v;o.style.mask=`
            linear-gradient(
                90deg,
                transparent 0,
                #fff ${F}%,
                #fff ${j}%,
                transparent 100%
            )
            `},N=()=>{if(!_.value)return;let o;const l=_.value,c=()=>{window.cancelAnimationFrame(o),o=window.requestAnimationFrame(C)};return l.addEventListener("scroll",c),setTimeout(()=>{C()},500),()=>{l.removeEventListener("scroll",c)}};return V(()=>{if(m.value){const l=()=>{T(),C()};f=new ResizeObserver(l),f.observe(m.value)}const o=N();D(()=>{o&&o()})}),D(()=>{f&&f.disconnect()}),{item:S,viewRef:m,modulePadding:e,imageSize:w,fontSize:k,isShowInfo:r,tagContainerRef:_,fileName:z}}},O={ref:"viewRef",style:{"border-radius":"10px",overflow:"hidden"}},W=["src","width"],M={class:"dateText"},P={key:0},q={key:0,class:"tagContainer",ref:"tagContainerRef"},G={class:"tag"},H={key:1,class:"info"},U=["src"],J={style:{width:"100%"}},K={class:"title"},Q={class:"dateText"},X={key:0},Y={key:0,class:"tagContainer",ref:"tagContainerRef"},Z={class:"tag"},p={key:0,class:"info"},$=["src"],ee={class:"title"},te={class:"dateText"},ie={key:0},ne={key:0,class:"tagContainer",ref:"tagContainerRef"},oe={class:"tag"},ae={key:1,class:"info"},se=["src"],le={class:"title"},re={class:"dateText"},ce={key:0},de={class:"tag"};function me(y,S,m,e,w,k){return t(),i("div",O,[e.item.view==="module"?(t(),i("div",{key:0,class:g(e.item.view),style:b(`padding: ${e.modulePadding}px;`)},[n("div",null,[e.item.image?(t(),i("img",{key:0,src:`./image/${e.item.image}`,width:e.imageSize},null,8,W)):s("",!0),n("div",null,[n("p",{class:"title",style:b(`font-size: ${e.fontSize}px;`)},a(e.fileName),5),n("div",M,[n("span",null,a(e.item.createDate),1),e.item.updateDate?(t(),i("span",P," 至 "+a(e.item.updateDate),1)):s("",!0)])])]),e.item.tag?(t(),i("div",q,[(t(!0),i(h,null,u(e.item.tag,r=>(t(),i("div",{key:r},[n("div",G,a(r),1)]))),128))],512)):s("",!0),e.isShowInfo&&e.item.info?(t(),i("p",H,a(e.item.info),1)):s("",!0)],6)):s("",!0),e.item.view==="set"?(t(),i("div",{key:1,class:g(e.item.view)},[n("div",null,[e.item.image?(t(),i("img",{key:0,src:`./image/${e.item.image}`},null,8,U)):s("",!0),n("div",J,[n("p",K,a(e.fileName),1),n("div",Q,[n("span",null,a(e.item.createDate),1),e.item.updateDate?(t(),i("span",X," 至 "+a(e.item.updateDate),1)):s("",!0)]),e.item.tag?(t(),i("div",Y,[(t(!0),i(h,null,u(e.item.tag,r=>(t(),i("div",{key:r},[n("div",Z,a(r),1)]))),128))],512)):s("",!0)])]),e.item.info?(t(),i("p",p,a(e.item.info),1)):s("",!0)],2)):s("",!0),e.item.view==="cover"?(t(),i("div",{key:2,class:g(e.item.view)},[e.item.image?(t(),i("img",{key:0,src:`./image/${e.item.image}`},null,8,$)):s("",!0),n("div",null,[n("div",null,[n("div",null,[n("p",ee,a(e.fileName),1),n("div",te,[n("span",null,a(e.item.createDate),1),e.item.updateDate?(t(),i("span",ie," 至 "+a(e.item.updateDate),1)):s("",!0)])])]),e.item.tag?(t(),i("div",ne,[(t(!0),i(h,null,u(e.item.tag,r=>(t(),i("div",null,[n("div",oe,a(r),1)]))),256))],512)):s("",!0),e.isShowInfo&&e.item.info?(t(),i("p",ae,a(e.item.info),1)):s("",!0)])],2)):s("",!0),e.item.view==="essay"?(t(),i("div",{key:3,class:g(e.item.view)},[n("div",null,[e.item.image?(t(),i("img",{key:0,src:`./image/${e.item.image}`},null,8,se)):s("",!0),n("div",null,[n("p",le,a(e.fileName),1),n("div",re,[n("span",null,a(e.item.createDate),1),e.item.updateDate?(t(),i("span",ce," 至 "+a(e.item.updateDate),1)):s("",!0)])])]),n("div",null,[(t(!0),i(h,null,u(e.item.tag,r=>(t(),i("div",null,[n("div",de,a(r),1)]))),256))]),n("p",null,a(e.item.info),1)],2)):s("",!0)],512)}const fe=B(I,[["render",me],["__scopeId","data-v-dc64e93f"]]);export{fe as C};
