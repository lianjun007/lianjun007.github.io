import{_ as B,r as m,o as L,a as I,c,b as T,d as n,F as h,e as g,f as u,n as f,g as w,h as E,t as p,i as S,w as x,j,k as b}from"./index-CRI2CSG_.js";const D={setup(){const t=m(null),e=m(325);function r(){t.value&&(t.value.scrollTop>e.value?(document.getElementById("navTop").classList.add("navBackground","navBackgroundDivider"),document.getElementById("navTitle").classList.add("navShow"),document.getElementById("navTitle").classList.remove("navHidden"),document.querySelector(".contentBackground").classList.add("backgroundBlur"),document.querySelectorAll(".cardView").forEach(v=>{v.classList.remove("controlBlur")})):(document.getElementById("navTop").classList.remove("navBackground","navBackgroundDivider"),document.getElementById("navTitle").classList.remove("navShow"),document.getElementById("navTitle").classList.add("navHidden"),document.querySelector(".contentBackground").classList.remove("backgroundBlur"),document.querySelectorAll(".cardView").forEach(v=>{v.classList.add("controlBlur")})),t.value.scrollTop>e.value+80?(document.getElementById("navLeft").classList.remove("navHidden"),document.getElementById("navLeft").classList.add("navShow"),document.getElementById("navRight").classList.remove("navHidden"),document.getElementById("navRight").classList.add("navShow")):(document.getElementById("navLeft").classList.remove("navShow"),document.getElementById("navLeft").classList.add("navHidden"),document.getElementById("navRight").classList.remove("navShow"),document.getElementById("navRight").classList.add("navHidden")),t.value.scrollTop>e.value+250?(document.querySelector(".navBar").classList.add("navBarTop","navBackgroundDivider"),document.getElementById("navTop").classList.remove("navBackgroundDivider"),document.querySelector(".contentBackground").style.top="88px"):(document.querySelector(".navBar").classList.remove("navBarTop","navBackgroundDivider"),document.querySelector(".contentBackground").style.top="44px",t.value.scrollTop>e.value&&document.getElementById("navTop").classList.add("navBackgroundDivider")))}const l=m(!1),i=m(null),a=m(null);let o=0,s=.2;function d(){if(a.value){o-=s;const v=a.value.offsetWidth;Math.abs(o)>=v/2&&(o=0),a.value.style.transform=`translateX(${o}px)`,requestAnimationFrame(d)}}const y=()=>{s=0},k=()=>{s=.2};return L(()=>{t.value&&t.value.addEventListener("scroll",r),a.value&&d(),a.value&&(a.value.addEventListener("mouseenter",y),a.value.addEventListener("mouseleave",k))}),I(()=>{t.value&&t.value.removeEventListener("scroll",r)}),{isScrolled:l,scrollView:t,skillScollRow:i,skillScollContainer:a,skillScollRow:i,skillScollContainer:a,showNavTopPara:e}},data(){return{myInfoList:[],linkList:[],skIconList:[],filterType:"all",lastWidth:0}},watch:{filterType(){this.$nextTick(()=>{this.arrangeWaterfall(),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},350)})},$route(t,e){t.path==="/"?(this.showNavTopPara=325,document.documentElement.style.setProperty("--txtop","200px")):(this.showNavTopPara=145,document.documentElement.style.setProperty("--txtop","20px"))}},computed:{filteredList(){return this.filterType==="all"?this.myInfoList:this.myInfoList.filter(t=>t.type===this.filterType)},getlinkList(){return this.linkList},getSkIconList(){return this.skIconList}},mounted(){this.$route.path==="/"?(this.showNavTopPara=325,document.documentElement.style.setProperty("--txtop","200px")):(this.showNavTopPara=145,document.documentElement.style.setProperty("--txtop","20px")),this.fetchData(),this.fetchContentData(),this.resizeObserver=new ResizeObserver(()=>{this.onResize()});const t=document.getElementById("waterfall");t&&this.resizeObserver.observe(t)},beforeDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()},methods:{goToPage(t,e,r){const l=this.$route.name;l!==t?e&&r?this.$router.push({name:t,query:{path:e,title:r}}):this.$router.push({name:t}):this.$router.replace({name:l,query:{path:e,title:r}})},setFilterType(t){this.filterType=t,this.$nextTick(()=>{this.arrangeWaterfall()})},fetchContentData(){const t=fetch("./json/project.json").then(l=>l.json()).then(l=>l.map(i=>({...i,type:"project"}))),e=fetch("./json/video.json").then(l=>l.json()).then(l=>l.map(i=>({...i,type:"video"}))),r=fetch("./json/essay.json").then(l=>l.json()).then(l=>l.map(i=>({...i,type:"essay"})));Promise.all([t,e,r]).then(([l,i,a])=>{this.myInfoList=[...l,...i,...a],this.myInfoList.forEach(o=>{o.createDate&&typeof o.createDate=="string"&&(o.createDateSortPara=new Date(o.createDate))}),this.myInfoList.sort((o,s)=>o.createDateSortPara-s.createDateSortPara),this.$nextTick(()=>{this.arrangeWaterfall()})}).catch(l=>console.error("数据加载错误:",l))},fetchData(){fetch("./json/link.json").then(t=>t.json()).then(t=>{this.linkList=t}),fetch("./json/skIcon.json").then(t=>t.json()).then(t=>{this.skIconList=t})},arrangeWaterfall(){document.getElementById("all").style.color="black",document.getElementById("project").style.color="black",document.getElementById("video").style.color="black",document.getElementById("essay").style.color="black",document.getElementById(this.filterType).style.color="#3A6A5E";const t=document.getElementById("waterfall"),e=Array.from(t.children),r=t.offsetWidth,l=Math.min(Math.floor(r/200),4),i=new Array(l).fill(0),a=(r-(l-1)*10)/l;e.forEach(o=>{const s=o.offsetHeight,d=i.indexOf(Math.min(...i));o.style.width=`${a}px`,o.style.top=`${i[d]+10}px`,o.style.left=`${d*a+d*10}px`,i[d]+=s+10}),t.style.height=`${Math.max(...i)}px`},onResize(){const t=document.getElementById("waterfall");if(!t)return;const e=t.offsetWidth;e!==this.lastWidth&&(this.arrangeWaterfall(),this.lastWidth=e,this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.arrangeWaterfall()},350))},beforeDestroy(){this.observer&&this.observer.disconnect()}}},$={ref:"scrollView"},P={class:"contentView"},C={class:"profilePhotoModule"},W={class:"linkAndSetting"},_={class:"controlBlur"},R=["href"],V=["src","title"],H={class:"list"},q={class:"skillScollRow",ref:"skillScollRow",style:{overflow:"hidden"}},F={class:"scrollView",ref:"skillScollContainer",style:{display:"flex",gap:"5px","align-items":"center",padding:"0 16px"}},N=["src","width"],z={class:"navBar"},M={id:"waterfall",class:"cardModule"},A=["onClick"],O=["src"];function J(t,e,r,l,i,a){const o=j("tag");return u(),c("div",$,[e[13]||(e[13]=T('<nav id="navTop" data-v-16e4d890><div id="navLeft" class="navHidden" data-v-16e4d890><img src="./image/SF-Symbol/phone.png" data-v-16e4d890><span data-v-16e4d890>联系</span></div><div id="navTitle" class="navHidden" data-v-16e4d890><img src="./image/lianjun.png" data-v-16e4d890><span data-v-16e4d890>LianJun</span></div><div id="navRight" class="navHidden" data-v-16e4d890><img src="./image/SF-Symbol/gearshape.png" data-v-16e4d890><span data-v-16e4d890>设置</span></div></nav>',1)),n("div",P,[e[12]||(e[12]=n("div",{class:"contentBackground"},null,-1)),n("div",C,[e[7]||(e[7]=n("img",{class:"profilePhoto",src:"./image/lianjun.png"},null,-1)),e[8]||(e[8]=n("p",{class:"largeTitle"},"LianJun",-1)),n("div",W,[(u(!0),c(h,null,g(a.getlinkList,s=>(u(),c("div",_,[n("a",{href:s.link,target:"_blank"},[n("img",{src:`./image/link/${s.image}`,title:s.name,style:f(`padding: ${s.padding}px;`)},null,12,V)],8,R)]))),256)),e[5]||(e[5]=n("div",{class:"divider controlBlur"},null,-1)),e[6]||(e[6]=n("div",{class:"controlBlur"},[n("img",{class:"linkButtonImage",src:"./image/link/setting.png",title:"设置",style:{padding:"4px"}})],-1))])]),n("div",H,[e[10]||(e[10]=n("div",{class:"listRow"},[n("p",null,"简介"),n("p",null,"喜欢研究 UI 的独立开发者")],-1)),e[11]||(e[11]=n("hr",null,null,-1)),n("div",{class:"listRow",id:"skillControl",onClick:e[0]||(e[0]=s=>a.goToPage("sklist"))},e[9]||(e[9]=[n("p",{class:"text"},"经历",-1),n("div",{class:"spaceBetween"},[n("p",{class:"rightText",id:"skillSingle"},"iOS 开发、前端开发、UI 设计 等"),n("img",{src:"./image/SF-Symbol/chevron.down.png",class:"listRowEndButtonImage",style:{width:"10px","margin-right":"0","margin-left":"5px"}})],-1)])),n("div",q,[n("div",F,[(u(!0),c(h,null,g(a.getSkIconList,s=>(u(),c("div",null,[n("img",{src:`./image/skill/${s.image}`,class:"skillImage",width:s.size,style:f(`margin-right: ${s.marginRight}px;`)},null,12,N)]))),256))],512)],512)]),n("nav",z,[n("div",null,[n("span",{id:"all",onClick:e[1]||(e[1]=s=>a.setFilterType("all"))},"全部"),n("span",{id:"project",onClick:e[2]||(e[2]=s=>a.setFilterType("project"))},"项目"),n("span",{id:"video",onClick:e[3]||(e[3]=s=>a.setFilterType("video"))},"视频"),n("span",{id:"essay",onClick:e[4]||(e[4]=s=>a.setFilterType("essay"))},"文章")])]),n("div",M,[(u(!0),c(h,null,g(a.filteredList,s=>(u(),c("div",{key:s.id},[n("div",{class:w(`cardView controlBlur ${s.type}`),onClick:d=>a.goToPage("content",s.type,s.title)},[n("div",null,[s.image?(u(),c("img",{key:0,src:`./image/${s.image}`},null,8,O)):E("",!0),n("div",null,[n("p",null,p(s.title),1),n("p",null,p(s.createDate),1)])]),n("div",null,[(u(!0),c(h,null,g(s.tag,d=>(u(),c("div",null,[S(o,null,{default:x(()=>[b(p(d),1)]),_:2},1024)]))),256))]),n("p",null,p(s.info),1)],10,A)]))),128))])])],512)}const X=B(D,[["render",J],["__scopeId","data-v-16e4d890"]]);export{X as default};
